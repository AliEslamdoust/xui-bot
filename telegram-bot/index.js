const{Telegraf:_}=require('telegraf'),c=require('./lib/database_handler'),d=require('./lib/log_handler'),e=require('./lib/axios_instance'),f=require('fs'),g=require('jalali-moment'),h=require('js-yaml'),B=require('path'),j=B.join('/root/telegram-bot/db/config.yaml'),{v4:k}=require('uuid'),{keys:A}=Object;let l;function m(){try{l=h.load(f.readFileSync(j));d.log('yamlData was loaded successfully','INFO')}catch(C){d.log(C,'ERROR')}}m();var n=l.BOT_TOKEN;var o=new _(n);let p={};o.use(async (_a,_b)=>{try{let D=_a.from.id;!p[D]&&(p[D]={});p[D].inviter=_a.update.message?_a.update.message.text.split(' ').pop():'';let _B=await aD();!_B.has(D)&&_c();async function _c(){let _A=await aB(D);if(aC)if(_A.length>0){let E=Array();let aS=0;for(let aT of _A){aS++;E.push([{text:`âšœï¸ Ú©Ø§Ù†Ø§Ù„ ${aS}âšœï¸`,url:`t.me/${aT}`}])}E.push([{text:'âœ”ï¸ ØªØ§ÛŒÛŒØ¯ Ø¹Ø¶ÙˆÛŒØª',callback_data:'checkJoinedChannels'}]);_a.sendMessage('â—ï¸Ù„Ø·ÙØ§ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø§Ø± Ø¨Ø§ Ø±Ø¨Ø§Øª Ø§Ø¨ØªØ¯Ø§ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„(Ù‡Ø§ÛŒ) Ø²ÛŒØ± Ø´ÙˆÛŒØ¯â—ï¸',{reply_markup:{inline_keyboard:E}})}else return _b();else return _b()}}catch(aU){d.log(aU,'ERROR')}});o.start(aV=>{let aW=aV.from.id;p[aW]={};let _C=aV.from.first_name;let _d=aV.from.last_name||'';_C=_C.replaceAll('/','');_d=_d.replaceAll('/','');p[aW].inviter=aV.payload;q(aW,'main_menu','','',aV.from.username||'',`${_C}/${_d}`)});o.on('callback_query',aX=>{let aY=aX.chat.id;p[aY].textReciever='';q(aY,aX.update.callback_query.data,!0,aX.msgId)});async function q(aZ,bA,bB,_D,_e,F){try{let bC=p[aZ].inviter;let bD=new String();let bE=Array();let bF=await c.getFullRow({userid:[aZ,'']},'users');if(!bF.data){let bG=await c.getAllRows({},'users');let bH=bG.data.length+1;bC=='/start'&&(bC='');await c.insertFullRow({id:bH,userid:aZ,username:_e,fullname:F,inviter:bC,user_lvl:'0',balance:0,status:'',reason:'',test_sub:0},'users');q(aZ,bA,bB,_D);return}let _E=bF.data.user_lvl;let _f=bF.data;switch(bA) {case 'checkJoinedChannels':bD='âœ… Ø¹Ø¶ÙˆÛŒØª Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ§ÛŒÛŒØ¯ Ø´Ø¯';q(aZ,'main_menu',!1,0,_e,F);break;case 'main_menu':if(_E!=0){bD='ğŸ’  Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯\n\nâšœï¸ Ù„Ø·ÙØ§ Ú¯Ø²ÛŒÙ†Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';bE=[[{text:'ğŸ‘¨â€ğŸ’¼ Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø¨Ø§Øª',callback_data:'management'}],[{text:'ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡',callback_data:'shop'},{text:'ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª ØªØ³Øª',callback_data:'test'}],[{text:'ğŸ’³ ØªØ±Ø§Ú©Ù†Ø´ Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'userPayments_0_1'}],[{text:'ğŸ’ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ',callback_data:'addBalance'},{text:'ğŸ‘¤ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ',callback_data:'user_panel'}],[{text:'ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'myConfigs_1'},{text:'ğŸ Ù‡Ø¯ÛŒÙ‡',callback_data:'gifts'}],[{text:'ğŸ“© ØªÛŒÚ©Øª Ù‡Ø§',callback_data:'supportTickets_1'}]];break}bD='ğŸ’  Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯\n\nğŸ“¡ Ø§ØªØµØ§Ù„ ØªØ§ Ø¢Ø®Ø±ÛŒÙ† Ù„Ø­Ø¸Ù‡\nâ˜ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªØ§ Ø±ÙˆØ² Ø¢Ø®Ø±\nğŸŒ Ø¯Ø§Ø±Ø§ÛŒ Ú†Ù†Ø¯ Ø³Ø±ÙˆØ± Ø¯Ø± Ù…Ù†Ø§Ø·Ù‚ Ù…Ø®ØªÙ„Ù Ø¬Ù‡Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ØªØ±\nğŸ”¥ Ù‚ÛŒÙ…Øª Ù…Ù†ØµÙØ§Ù†Ù‡ Ø¯Ø± Ú©Ù†Ø§Ø± Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§\n\nâšœï¸ Ù„Ø·ÙØ§ Ú¯Ø²ÛŒÙ†Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';bE=[[{text:'â• Ø¯Ø±ÛŒØ§ÙØª Ù¾Ù†Ù„ ÙØ±ÙˆØ´',callback_data:'getPanel'}],[{text:'ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡',callback_data:'shop'},{text:'ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª ØªØ³Øª',callback_data:'test'}],[{text:'ğŸ’³ ØªØ±Ø§Ú©Ù†Ø´ Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'userPayments_0_1'}],[{text:'ğŸ’ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ',callback_data:'addBalance'},{text:'ğŸ‘¤ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ',callback_data:'user_panel'}],[{text:'ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'myConfigs_1'},{text:'ğŸ Ù‡Ø¯ÛŒÙ‡',callback_data:'gifts'}],[{text:'âœ‰ï¸ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'support'}]];!l.configs.give_test&&bE[1].pop();(!l.configs.give_panel&&_E==0)&&bE.shift();break;case 'management':bD='ğŸ›  Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø¨Ø§Øª:';switch(_E) {case 1:bE=[[{text:'ğŸ‘¥ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'getAllUsers_1'},{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}],[{text:'âœï¸ Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ',callback_data:'sendNotice'}]];break;case 2:bE=[[{text:'ğŸ‘¨â€ğŸ’¼ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù†',callback_data:'seeAdmins'},{text:'ğŸ‘¥ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'getAllUsers_1'}],[{text:'âœï¸ Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ',callback_data:'sendNotice'}]];break;case 3:bE=[[{text:'ğŸ‘¨â€ğŸ’¼ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù†',callback_data:'seeAdmins'},{text:'ğŸ‘¥ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'getAllUsers_1'}],[{text:'ğŸ›’ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª',callback_data:'editProducts'},{text:'ğŸ“£ Ú©Ø§Ù†Ø§Ù„ Ù‡Ø§ÛŒ Ù‚ÙÙ„ Ø´Ø¯Ù‡',callback_data:'changeLockedChannels'}],[{text:'âœï¸ Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ',callback_data:'sendNotice'}]];break;case 4:bE=[[{text:'ğŸ’ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾Ù†Ù„',callback_data:'givePanels'}],[{text:'ğŸ‘¨â€ğŸ’¼ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù†',callback_data:'seeAdmins'},{text:'ğŸ‘¥ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'getAllUsers_1'}],[{text:'ğŸ›’ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª',callback_data:'editProducts'},{text:'ğŸ“£ Ú©Ø§Ù†Ø§Ù„ Ù‡Ø§ÛŒ Ù‚ÙÙ„ Ø´Ø¯Ù‡',callback_data:'changeLockedChannels'}],[{text:'ğŸ’³ Ø¯Ø®Ù„ Ùˆ Ø®Ø±Ø¬',callback_data:'totalBalance'},{text:'âš™ï¸ Ø¯ÛŒÚ¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª',callback_data:'otherSettings'}],[{text:'â˜¢ï¸ Ø±ÛŒØ³ØªØ§Ø±Øª Ù‡Ø³ØªÙ‡ x-ray',callback_data:'restartXray'}],[{text:'ğŸ”„ Ø³Ø±ÙˆÛŒØ³ Ú†Ú©',callback_data:'serviceChecker'},{text:'âœï¸ Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ',callback_data:'sendNotice'}]];break}!l.configs.give_panel&&bE.shift();bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'getPanel':bD='â—ï¸ ØªØ§ Ø§Ø·Ù„Ø§Ø¹ Ø«Ø§Ù†ÙˆÛŒ Ù¾Ù†Ù„ ÙØ±ÙˆØ´ Ø§Ø±Ø§Ø¦Ù‡ Ù†Ù…ÛŒÚ¯Ø±Ø¯Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'shop':bD='ğŸ› Ø³Ø±ÙˆÛŒØ³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:';let bI=A(l.credentials);if(bI.length===1&&l.credentials[bI[0]].active){q(aZ,'shopItems_'+bI[0],bB,_D,_e,F);return}for(let bN of bI){let bO=l.credentials[bN];if(!l.credentials[bN].active)continue;bE.push([{text:bO.name,callback_data:`shopItems_${bN}`}])}bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'test':let bJ=await c.getFullRow({userid:[aZ]},'users');if(bJ.data.test_sub==1){bD='â—ï¸ Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§ ÛŒÚ© Ø³Ø±ÙˆØ± ØªØ³ØªÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break}let bK=await c.getFullRow({type:['test']},'pricing');bK=bK.data;bD=`Ø¬Ù‡Øª Ø¯Ø±ÛŒØ§ÙØª Ø³Ø±ÙˆÛŒØ³ ØªØ³ØªÛŒ (${bK.traffic} Ú¯ÛŒÚ¯ ${bK.duration} Ø±ÙˆØ²Ù‡ ${bK.ip_limit} Ú©Ø§Ø±Ø¨Ø±Ù‡) Ø¨Ø± Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø³Ø±ÙˆØ± ØªØ³ØªÛŒ" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯`;bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø³Ø±ÙˆØ± ØªØ³ØªÛŒ',callback_data:'confirmTestServer'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]];break;case 'confirmTestServer':let bL=await c.getFullRow({userid:[aZ]},'users');if(bL.data.test_sub==1){bD='â—ï¸ Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§ ÛŒÚ© Ø³Ø±ÙˆØ± ØªØ³ØªÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break}let bM=await c.getFullRow({type:['test']},'pricing');bM=bM.data;let _F=bM.location;let _g=aL(16,!0);let _h={id:'',email:'',limitIp:bM.ip_limit,totalGB:bM.traffic*1024**3,expiryTime:Date.now()+bM.duration*24*60*60*1000,enable:!0,tgId:'',subId:_g,inbound:''};let I=l.credentials[_F].inbounds;let J=aL(9,!0);for(let bP in A(I)){_h.email=J+'-'+bP;_h.inbound=parseInt(A(I)[bP]);_h.id=aK();let bQ=await e.addClient(_h,_F);if(!bQ.ok)break}await c.updateFullRow({userid:[aZ]},{test_sub:1},'users');await c.insertFullRow({owner_id:aZ,users_id:`${aZ}/`,subId:_g,name:'ØªØ³Øª',status:'active',location:_F,reserve:'',sentNotice:0},'subscriptions');bD=`âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯
Ø§Ø² Ø¨Ø®Ø´ "ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†" Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ù„ÛŒÙ†Ú© Ø¢Ù† Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯`;bE=[[{text:'ğŸ“± Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`configInfo_${_g}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]];break;case 'addBalance':bD=`ğŸ’  Ø¬Ù‡Øª Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø®ÙˆØ¯ Ù„Ø·ÙØ§ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ù‡ Ø¢ÛŒØ¯ÛŒ Ø²ÛŒØ± Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ú©Ù†ÛŒØ¯:
        
@${l.supportId}`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'gifts':bE.push([{text:'ğŸ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ú©Ø¯ Ù‡Ø¯ÛŒÙ‡',callback_data:'enterGiftCode'}]);let K=await c.getAllRows({enable:[1], hidden:[0,'AND']},'gifts');for(let bR of K.data)bE.push([{text:bR.name,callback_data:'recieveGift_'+bR.code}]);bD='ğŸ Ù‡Ø¯ÛŒÙ‡ Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø±Ùˆ Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø¯Ø± Ù„ÛŒØ³Øª Ø²ÛŒØ± Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒÙ†\n\nâ—ï¸ Ø§Ú¯Ø± Ù‡Ø¯ÛŒÙ‡ Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†ÛŒØ³Øª Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ù„ÛŒÙ„ Ø¨Ø§Ø´Ø¯ Ú©Ù‡ Ø´Ù…Ø§ ÙˆØ§Ø¬Ø¯ Ø´Ø±Ø§ÛŒØ· Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù† Ù†ÛŒØ³ØªÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'enterGiftCode':isNaN(p[aZ].gitCodeCooldown)&&(p[aZ].gitCodeCooldown=Date.now()-10000);if(Date.now()-p[aZ].gitCodeCooldown<10000){bD='â—ï¸ Ù‡Ø± 10 Ø«Ø§Ù†ÛŒÙ‡ ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'gifts'}]);break}p[aZ].textReciever='enterGiftCode';bD='ğŸ Ù„Ø·ÙØ§ Ú©Ø¯ Ù‡Ø¯ÛŒÙ‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù‡Ø± 10 Ø«Ø§Ù†ÛŒÙ‡ ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ù…ÛŒØªÙˆØ§Ù† Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯)';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'gifts'}]);break;case 'user_panel':bD='ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´Ù…Ø§:\n\n';let L=await c.getUserSubs(aZ);L=L.data.length;let M=await c.getAllRows({inviter:[aZ]},'users');bD+=`ğŸ”° Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ: \`${_f.userid}\`
ğŸ’ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø­Ø³Ø§Ø¨: ${aF(_f.balance)} ØªÙˆÙ…Ø§Ù†
ğŸ‘¥ ØªØ¹Ø¯Ø§Ø¯ Ø²ÛŒØ± Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù‡Ø§: ${M.data.length}

â˜‘ï¸ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§: ${L}

âœ… Ø¨Ø§ Ù‡Ø± Ø®Ø±ÛŒØ¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù‡Ø§ÛŒØªØ§Ù†ØŒ 10 Ø¯Ø±ØµØ¯ Ø§Ø² Ù…Ø¨Ù„Øº Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù‡Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù‡Ø¯ÛŒÙ‡ Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ´ÙˆØ¯`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'},{text:'ğŸ‘¥ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª',callback_data:'getInviteLink'}]);break;case 'getInviteLink':let N=`https://t.me/${l.botId}?start=${aZ}`;bD=`â• Ø§ÙØ±Ø§Ø¯ÛŒ Ú©Ù‡ Ø¨Ø§ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± ÙˆØ§Ø±Ø¯ Ø±Ø¨Ø§Øª Ø´ÙˆÙ†Ø¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø´Ù…Ø§ Ø­Ø³Ø§Ø¨ Ù…ÛŒØ´ÙˆÙ†Ø¯

âœ… Ø¨Ø§ Ù‡Ø± Ø®Ø±ÛŒØ¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù‡Ø§ÛŒØªØ§Ù†ØŒ 10 Ø¯Ø±ØµØ¯ Ø§Ø² Ù…Ø¨Ù„Øº Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù‡Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù‡Ø¯ÛŒÙ‡ Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ´ÙˆØ¯

Ù„ÛŒÙ†Ú© Ø´Ù…Ø§:
\`${N}\``;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'user_panel'}]);break;case 'addMyConfig':p[aZ].textReciever='enterManualConfig';bD='â” Ù„Ø·ÙØ§ Ù„ÛŒÙ†Ú© ÛŒØ§ Ø®ÙˆØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¯Ø§Ø®Ù„ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒØªÙˆÙ† Ø§Ø¶Ø§ÙÙ‡ Ø¨Ø´Ù‡:\n\nâšœï¸ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒØªÙˆÙ† Ø±Ùˆ Ù…ÛŒØªÙˆÙ†ÛŒÙ† Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯ ';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'myConfigs_1'}]);break;case 'support':bD='ğŸ‘¤ Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…ÛŒØªÙˆØ§Ù†Ø¯ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯\nâ“ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¯Ø± ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ø¨Ø§Ø² Ø´Ø¯Ù‡ Ù…Ø´Ú©Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯';bE=[[{text:'ğŸŸ¢ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ø¨Ø§Ø²',callback_data:'openTickets/1'},{text:'ğŸ“§ ØªÙ…Ø§Ù…ÛŒ ØªÛŒÚ©Øª Ù‡Ø§',callback_data:'allTickets/1'}],[{text:'ğŸ–Š Ù†ÙˆØ´ØªÙ† ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯',callback_data:'newTicket'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'main_menu'}]];break;case 'newTicket':p[aZ].textReciever='enterTicketSubject';bD='ğŸ”° Ø¯Ø± Ø­Ø§Ù„ Ù†ÙˆØ´ØªÙ† ÛŒÚ© ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯ Ù…ÛŒØ¨Ø§Ø´ÛŒØ¯\n\nÙ„Ø·ÙØ§ Ù…ÙˆØ¶ÙˆØ¹ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'}]);break;case 'sendNotice':bD='â” Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ú†Ù‡ Ú©Ø³Ø§Ù†ÛŒ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ØŸ';bE=[[{text:'ğŸ‘¨â€ğŸ’¼ ØªÙ…Ø§Ù…ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù†',callback_data:'sendNoticetoAdmins'}],[{text:'ğŸ‘¥ ØªÙ…Ø§Ù…ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'sendNoticetoAll'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'}]];break;case 'sendNoticetoAdmins':p[aZ].textReciever='sendNotice';p[aZ].noticeReciever='admins';bD='â• Ù„Ø·ÙØ§ Ù¾ÛŒØ§Ù…ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'sendNotice'}]);break;case 'sendNoticetoAll':p[aZ].textReciever='sendNotice';p[aZ].noticeReciever='everyone';bD='â• Ù„Ø·ÙØ§ Ù¾ÛŒØ§Ù…ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'sendNotice'}]);break;case 'confirmSendNotice':await u(p[aZ].noticeReciever,p[aZ].fullMessage);bD='âœ… Ù¾ÛŒØ§Ù… Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù…ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'confirmAddNewConfig':let O=p[aZ].newConfigTraffic;let P=p[aZ].newConfigDuration;P=P==0?0:Date.now()+P*30*24*60*60*1000;let Q=p[aZ].newConfigIP;let R=p[aZ].newConfigLocation;let S=p[aZ].targetUsersId;let _t=aL(9,!0);let U=aL(16,!0);let V=A(l.credentials[R].inbounds);let W={id:0,email:'',limitIp:Q,totalGB:O,expiryTime:P,enable:!0,tgId:'',subId:U,inbound:0};for(let bS in V){let bT={...W};bT.id=aK();bT.inbound=V[bS];bT.email=_t+'-'+bS;let bU=await e.addClient(bT,R);if(!bU.ok)break}let X=await e.getRandomWords(2,4);X=X.data;await c.insertFullRow({owner_id:S,users_id:`${S}/`,subId:U,name:X[0]+'-'+X[1],status:'active',location:R,reserve:'',sentNotice:0},'subscriptions');bD='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯';bE.push([{text:'ğŸ”š Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userConfigs_${S}`}]);aE(S,0,'âœ… ÛŒÚ© Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ø·Ø±Ù Ù…Ø¯ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ ÙØ¹Ø§Ù„ Ø´Ø¯',[[{text:'ğŸ“± Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`configInfo_${U}`}]],!1);break;case 'serviceChecker':let Y=aO==0?'ğŸ”´ ØºÛŒØ± ÙØ¹Ø§Ù„':'ğŸŸ¢ ÙØ¹Ø§Ù„';bD=`â—ï¸ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³ Ú†Ú©Ø±:

${Y}

â“ Ø³Ø±ÙˆÛŒØ³ Ú†Ú©Ø±: Ø³Ø±ÙˆÛŒØ³ÛŒ Ú©Ù‡ Ø¯Ø± Ù‡Ø± ${aO/1000} Ø«Ø§Ù†ÛŒÙ‡ Ú†Ú© Ù…ÛŒÚ©Ù†Ø¯ Ùˆ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø¨Ù‡ Ø§ØªÙ…Ø§Ù… Ø±Ø³ÛŒØ¯Ù‡ Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ú¯Ø²Ø§Ø±Ø´ Ù…ÛŒØ¯Ù‡Ø¯
Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒÛŒ Ú©Ù‡ 5 Ø±ÙˆØ² Ø§Ø² Ø§ØªÙ…Ø§Ù…Ø´Ø§Ù† Ú¯Ø°Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ Ø±Ø§ Ø­Ø°Ù Ù…ÛŒÚ©Ù†Ø¯
Ùˆ Ù‡Ù…ÛŒÙ†Ø·ÙˆØ± Ø§Ú¯Ø± Ø³Ø±ÙˆÛŒØ³ÛŒ Ø±Ø²Ø±Ùˆ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø³Ø±ÙˆÛŒØ³ Ø±Ø²Ø±Ùˆ Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø§ØµÙ„ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒÚ©Ù†Ø¯

â€¼ï¸ Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆÛŒØ³ Ø¹Ø¯Ø¯ 0 Ø±Ø§ Ø¨ÙØ±Ø³ØªÛŒØ¯
 Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ ÛŒØ§ ØªÙ†Ø¸ÛŒÙ… ØªØ§ÛŒÙ…Ø± ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² 0 Ø¨ÙØ±Ø³ØªÛŒØ¯ (Ø¨Ù‡ Ø«Ø§Ù†ÛŒÙ‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯)`;p[aZ].textReciever='getCheckerTimer';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'}]);break;case 'restartXray':let Z=A(l.credentials);bD='â—ï¸ Ù‡Ø³ØªÙ‡ Ú©Ø¯Ø§Ù… Ø³Ø±ÙˆØ± Ø±Ø§ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒØ¯ØŸ';for(let bV of Z)bE.push([{text:bV,callback_data:`restart_${bV}`}]);bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'}]);break;default:if(bA.includes('getAllUsers_')){let bW=parseInt(bA.split('_')[1]);let bX=await c.getAllRows({},'users');let bY=await c.getFullRow({userid:[aZ]},'users');bY=bY.data;!bW&&(bW=1);p[aZ].textReciever='seeUserStats';bD=`ğŸ‘¥ Ù„ÛŒØ³Øª ØªÙ…Ø§Ù…ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø¨Ø§Øª\n\nØµÙØ­Ù‡ ${bW}\n\nâ‰ï¸ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ Ø¨ÛŒØ´ØªØ± Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯ ØªØ§ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒØ´ÙˆÙ† Ø±Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒÙ†`;bX.data.sort((a,b)=>a.userid-b.userid);let bZ=20*(bW-1);while (bZ<20*bW&&bZ<bX.data.length) {let cC=bX.data[bZ];if(bY.user_lvl!=4&&bY.user_lvl<=cC.user_lvl&&aZ!=cC.userid){bZ++;continue}let cD=cC.fullname.split('/')[0];bZ%2==0?bE.push([{text:cC.userid+' - '+cD,callback_data:`seeUserStats_${cC.userid}`}]):bE[bE.length-1].push({text:cC.userid+' - '+cD,callback_data:`seeUserStats_${cC.userid}`});bZ++}let cA=Array();let cB=Array();if(bW!=1){let cE=bW-1;cA.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:'getAllUsers_'+1});cB.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`getAllUsers_${cE}`})}cB.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'});let _G=Math.ceil(bX.data.length/20);if(bW!=_G){let cF=bW+1;cA.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`getAllUsers_${_G}`});cB.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`getAllUsers_${cF}`})}bE.push(cA);bE.push(cB)}else if(bA.includes('seeUserStats_')){let cG=bA.split('_')[1];let cH=await c.getFullRow({userid:[cG]},'users');bD='ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±:\n\n';let cI=cH.data;let cJ=await c.getUserSubs(cG);let cK=aF(cI.balance);bD+=`ğŸ”¹ Ø³Ø·Ø­ Ú©Ø§Ø±Ø¨Ø±: 

Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ: \`${cI.userid}\`
Ù†Ø§Ù… Ú©Ø§Ù…Ù„: ${cI.fullname.split('/').join(' ')}
Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: @${cI.username}
ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§: ${cJ.data.length}
Ù…ÙˆØ¬ÙˆØ¯ÛŒ: ${cK}
ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±: `;bE.push([{text:'ğŸ’³ ØªØºÛŒÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±',callback_data:`userBalance_${cG}`},{text:'â›“ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±',callback_data:`userConfigs_${cG}`}]);bE.push([{text:'ğŸ“¨ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±',callback_data:`userTickets_${cG}_1`},{text:'ğŸ’³ ØªØ±Ø§Ú©Ù†Ø´ Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±',callback_data:`userPayments_${cG}_1`}]);cI.status=='banned'?(bD+=`âŒ Ù…Ø³Ø¯ÙˆØ¯
Ø¯Ù„ÛŒÙ„ Ù…Ø³Ø¯ÙˆØ¯ÛŒ: ${cI.reason}`,bE.push([{text:'â™»ï¸ Ø±ÙØ¹ Ù…Ø³Ø¯ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±',callback_data:`banUser_clear_${cG}`}])):(bD+='âœ… ÙØ¹Ø§Ù„',bE.push([{text:'ğŸš« Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±',callback_data:`banUser_banned_${cG}`}]));bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getAllUsers_1'}])}else if(bA.includes('banUser_')){let cL=bA.split('_')[1];let cM=bA.split('_')[2];let cN=await c.getFullRow({userid:[cM,'']},'users');let cO=cN.data;bD=`â‰ï¸ Ø§Ø² Ù…Ø³Ø¯ÙˆØ¯ Ø³Ø§Ø²ÛŒ Ú©Ø§Ø±Ø¨Ø± "${cO.fullname.split('/').join(' ')}" Ø¨Ø§ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ (${cO.userid}) Ùˆ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ "@${cO.username}" Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ`;let cP=cL=='banned'?'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù†':'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø±ÙØ¹ Ù…Ø³Ø¯ÙˆØ¯ÛŒ';bE.push([{text:cP,callback_data:`confirmBan_${cL}_${cM}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${cM}`}])}else if(bA.includes('confirmBan_')){let cQ=bA.split('_')[1];let cR=bA.split('_')[2];if(cQ=='banned'){p[aZ].banUser={userid:cR,status:cQ};bD='â“ Ù„Ø·ÙØ§ Ø¯Ù„ÛŒÙ„ Ø±ÙØ¹ Ù…Ø³Ø¯ÙˆØ¯ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø®ØªØµØ± Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯:';p[aZ].textReciever='banUserReason'}else{let cS=await c.getFullRow({userid:[cR,'']},'users');if(cS.ok){let cT=cS.data;let cU=await c.updateFullRow({userid:[cR]},{status:cQ,reason:cT.reason},'users');cU.ok&&(bD=`âœ…ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ² Ø´Ø¯
ÙˆØ¶Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯:
âœ… Ø¢Ø²Ø§Ø¯`)}}bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${cR}`}])}else if(bA.includes('configInfo_')){let cV=bA.split('_')[1];let cW=await c.getFullRow({subId:[cV]},'subscriptions');cW=cW.data;let cX=await e.getConfigInfo(cV,cW.location);let cY=cX.data;let cZ=cY.totalGB/1024**3;let dA=cZ-(cY.up+cY.down)/1024**3;let dB=cW.name;let _H=cW.owner_id;let _i=cY.limitIp;let _j=cY.expiryTime;let _k=cW.status;let _l=cW.users_id;let _m='';let _n=!1;if(_k=='active'){let dC=cY.totalGB;let dD=cY.up;let dE=cY.down;let dF=cY.expiryTime;let dG=Date.now();!cY.enable||(dC!=0&&dD+dE>=dC)||(dF!=0&&dF<=dG)?_k='ğŸ”´ Ø¨Ù‡ Ø§ØªÙ…Ø§Ù… Ø±Ø³ÛŒØ¯Ù‡':_k='ğŸŸ¢ ÙØ¹Ø§Ù„'}else{_k='ğŸŸ¡ Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ±';_n=!0}let _o='';_l=_l.split('/');_l.pop();if(_H==aZ){_o+='ğŸ’» Ø§ÙØ±Ø§Ø¯ Ø²ÛŒØ± Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯:\n';for(let dH in _l){let dI=_l[dH];let dJ=++dH;dI==aZ?_o+=`${dJ}- Ø´Ù…Ø§`:_o+=`${dJ}- \`${dI}\``;_o+='\n'}_H='Ø´Ù…Ø§';bE=[[{text:'ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`recieveMyConfig_${cV}`}]];if(!_n){p[aZ].previous=bA;bE[0].unshift({text:'â™»ï¸ ØªÙ…Ø¯ÛŒØ¯',callback_data:`prolongConfig_${cV}`});(_j==0&&cZ==0)&&bE[0].shift()}bE.push([{text:'ğŸ”± Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:`manageMyConfig_${cV}`}]);bE.push([{text:'âŒ Ø­Ø°Ù',callback_data:`deleteMyConfig_${cV}`},{text:'âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª',callback_data:`setMyConfig_${cV}`}])}else{let dK=await c.getFullRow({userid:[_H]},'users');_H=dK.data.fullname.split('/').join(' ');bE.push([{text:'ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`recieveMyConfig_${cV}`}])}dA=dA.toFixed(2)+'GB';cZ==0?(cZ='â™¾ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',_m=`âŒ›ï¸ Ø­Ø¬Ù… Ù…ØµØ±Ù Ø´Ø¯Ù‡: ${dA}`):(cZ=cZ.toFixed(2)+'GB',_m=`âŒ›ï¸ Ø­Ø¬Ù… Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡: ${dA}`);_i==0?_i='âŒ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª':_i+=' Ú©Ø§Ø±Ø¨Ø±';if(_j==0)_j='â™¾ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯';else{let dL=new Date(_j);var H={timeZone:'Asia/Tehran',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:!1};let dM=dL.toLocaleString('en-US',H);_j=g(dL,'YYYY/M/D').locale('fa').format('YYYY/M/D')+' - '+dM}bD=`ğŸ“± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ù†ÙÛŒÚ¯ ${dB}:

âšªï¸ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ÙÛŒÚ¯: ${_k}

ğŸ‘¤ ØµØ§Ø­Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯: ${_H}
â³ Ø­Ø¬Ù… Ú©Ø§Ù†ÙÛŒÚ¯: ${cZ}
ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ù‡Ù…Ø²Ù…Ø§Ù†: ${_i}

${_m}
ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§: ${_j}

${_o}`;cW.status!='active'&&(bD=`â€¼ï¸ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡ Ø§Ø³Øª
            
            ğŸ“± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ù†ÙÛŒÚ¯ ${dB}:
          
          ğŸ‘¤ ØµØ§Ø­Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯: ${_H}
          â³ Ø­Ø¬Ù… Ú©Ø§Ù†ÙÛŒÚ¯: ${cZ}
          ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ù‡Ù…Ø²Ù…Ø§Ù†: ${_i}
          
          ${_m}
          ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§: ${_j}`,bE=Array());bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'myConfigs_1'}])}else if(bA.includes('recieveMyConfig_')){let dN=bA.split('_')[1];let dO=await c.getFullRow({subId:[dN,'']},'subscriptions');let dP=await e.getConfigInfo(dN,dO.data.location);let dQ=dP.data;bD=`ğŸ”— Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§:

${l.credentials[dO.data.location].sub_address+dQ.subId}

Ù„ÛŒÙ†Ú© Ø¨Ø§Ù„Ø§ Ø±Ø§ Ú©Ù¾ÛŒ Ùˆ Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ âœ…
â‰ï¸ Ø¬Ù‡Øª Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯ Ø§ØµÙ„ÛŒ (Ø¨Ø¯ÙˆÙ† Ù„ÛŒÙ†Ú©) Ú¯Ø²ÛŒÙ†Ù‡ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯`;bE=[[{text:'ğŸ”‘ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÛŒ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`getConfigCode_${dN}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${dN}`}]]}else if(bA.includes('getConfigCode_')){let dR=bA.split('_')[1];let dS=await c.getFullRow({subId:[dR,'']},'subscriptions');let dT=dS.data.location;let dU=await e.getConfigInfo(dR,dT);let dV=dU.data;let dW=dV.id;let dX=l.credentials[dT].inbounds;bD='ğŸ”° Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø´Ù…Ø§:\n\n';for(let dY in A(dX)){let dZ=dX[A(dX)[dY]];let eA={ps:dZ[1],add:l.credentials[dT].panel_address,port:dZ[0],id:dW[dY]};let eB;if(dZ[2]=='vmess')eB=aG(eA);else dZ[2]=='vless'&&(eB=aH(eA));bD+=`\`${eB}\`\n\n`}bD+='Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ Ø±Ø§ Ú©Ù¾ÛŒ Ùˆ Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ âœ…';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${dR}`}])}else if(bA.includes('deleteMyConfig_')){let eC=bA.split('_')[1];p[aZ].textReciever='confirmConfigDelete';let eD=await e.getRandomWords(1,6);eD=eD.data[0];p[aZ].randomPhrase=eD;p[aZ].subIdName=eC;bD=`â‰ï¸ Ø§Ú¯Ø± Ø§Ø² Ø­Ø°Ù Ú©Ø§Ù†ÙÛŒÚ¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ Ù„Ø·ÙØ§ Ú©Ù„Ù…Ù‡ Ø±Ù†Ø¯ÙˆÙ… Ø²ÛŒØ± Ø±Ø§ Ø¨ÙØ±Ø³ØªÛŒØ¯:

\`${eD}\`

ğŸš« Ø§ÛŒÙ† Ø¹Ù…Ù„ Ø¨Ù‡ Ù‡ÛŒÚ† Ø¹Ù†ÙˆØ§Ù† Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª Ùˆ Ø³Ø±ÙˆÛŒØ³ Ø­Ø°Ù Ø´Ø¯Ù‡ Ø¨Ù‡ Ù‡ÛŒÚ† Ø¹Ù†ÙˆØ§Ù† Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù†ÛŒØ³Øª

â€¼ï¸ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø§ÛŒÙ† Ú©Ø§Ø± 100% Ø¨Ø§ Ø´Ù…Ø§Ø³Øª

Ø¬Ù‡Øª Ù„ØºÙˆ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯`;bB=!1;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'myConfigs_1'}])}else if(bA.includes('manageMyConfig_')){let eE=bA.split('_')[1];let eF=await c.getFullRow({subId:[eE]},'subscriptions');let eG=eF.data.users_id.split('/');eG.pop();let eH='';for(let eI in eG){let eJ=eG[eI];if(eJ==aZ){eH+=`${++eI}- Ø´Ù…Ø§\n\n`;continue}let eK=await c.getFullRow({userid:[eJ]},'users');if(!eK.ok)continue;eH+=`${++eI}-\nØ´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ:\n\`${eJ}\`\nÙ†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±:\n${eK.data.fullname.split('/')[0]}\n\n`}bD=`ğŸ‘¥ Ø§ÙØ±Ø§Ø¯ÛŒ Ú©Ù‡ Ù‡Ù… Ø§Ú©Ù†ÙˆÙ† Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ "${eF.data.name}" Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯:

${eH}`;bE=[[{text:'â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±',callback_data:`addConfigClient_${eE}`}],[{text:'â– Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±',callback_data:`removeConfigClient_${eE}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eE}`}]]}else if(bA.includes('addConfigClient_')){let eL=bA.split('_')[1];p[aZ].configName=eL;p[aZ].textReciever='addClientToConfig';bD='â• Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒÙ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ (Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ø¹Ø¶Ùˆ Ø±Ø¨Ø§Øª Ø¨Ø§Ø´Ø¯):';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eL}`}]);bB=!1}else if(bA.includes('addedClientConfig_')){let eM=bA.split('_')[1];let eN=bA.split('_')[2];let eO=await c.getFullRow({subId:[eN]},'subscriptions');let eP=eO.data.users_id;if(eP.includes(eM)){bD='â• Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ù‚Ø¨Ù„ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ø¯';break}let eQ=await c.getFullRow({userid:[eM]},'users');eP+=`${eM}/`;c.updateFullRow({subId:[eN]},{users_id:eP},'subscriptions');bD='âœ… Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eN}`}])}else if(bA.includes('removeConfigClient_')){let eR=bA.split('_')[1];p[aZ].configName=eR;p[aZ].textReciever='removeClientFromConfig';bD='â• Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒÙ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eR}`}])}else if(bA.includes('removedClientConfig_')){let eS=bA.split('_')[1];let eT=bA.split('_')[2];let eU=await c.getFullRow({subId:[eT]},'subscriptions');let eV=eU.data.users_id;eV=eV.replace(`${eS}/`,'');eV==''&&(eV=null);c.updateFullRow({subId:[eT]},{users_id:eV},'subscriptions');bD='âœ… Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eT}`}])}else if(bA.includes('setMyConfig_')){let eW=bA.split('_')[1];let eX=await c.getFullRow({subId:[eW]},'subscriptions');let eY=eX.data.name;let eZ=eX.data.location;bD=`ğŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ø§Ù†ÙÛŒÚ¯ ${eW}:

ğŸ”‘ Ù†Ø§Ù… Ú©Ø§Ù†ÙÛŒÚ¯: ${eY}
ğŸ”— Ù„ÛŒÙ†Ú© ÙØ¹Ù„ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯:
${l.credentials[eZ].sub_address+eW}

â—ï¸ ØªÙˆØ¬Ù‡: Ø¨Ø§ ØªØºÛŒÛŒØ± Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ØŒ Ú©Ø§Ù†ÙÛŒÚ¯Ù ØªÙ…Ø§Ù…ÛŒ Ø§ÙØ±Ø§Ø¯ÛŒ Ú©Ù‡ Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ù…ØªØµÙ„ Ù‡Ø³ØªÙ† Ù‚Ø·Ø¹ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø±Ø¨Ø§Øª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯ Ø±Ùˆ Ø§Ø² Ù‚Ø³Ù…Øª "ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯" Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ù†
â• Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ù†Ø§Ø³Ø¨ Ø­Ø°Ù Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ÛŒ Ù‡Ø³Øª Ú©Ù‡ Ù‚Ø¨Ù„Ø§ Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ùˆ Ø¯Ø§Ø´ØªÙ†`;bE=[[{text:'ğŸ–‹ ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`renameMyConfig_${eW}`}],[{text:'ğŸ”— ØªØºÛŒÛŒØ± Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`resubMyConfig_${eW}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${eW}`}]]}else if(bA.includes('renameMyConfig_')){let fA=bA.split('_')[1];bD='ğŸ–‹ Ù„Ø·ÙØ§ Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`setMyConfig_${fA}`}]);p[aZ].textReciever='renameConfigName';p[aZ].configName=fA}else if(bA.includes('resubMyConfig_')){let fB=bA.split('_')[1];bD='â‰ï¸ Ø§Ø² ØªØºÛŒÛŒØ± Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ\n\nâ—ï¸ ØªÙˆØ¬Ù‡: Ø§ÛŒÙ† Ø¹Ù…Ù„ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù…ÛŒ Ø¨Ø§Ø´Ø¯';bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯',callback_data:`resetConfigLink_${fB}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`setMyConfig_${fB}`}]]}else if(bA.includes('resetConfigLink_')){let fC=bA.split('_')[1];let fD=await c.getFullRow({subId:[fC]},'subscriptions');let fE=fD.data.location;let fF=await e.getConfigInfo(fC,fE);let fG=fF.data;if(fG.email.length==0)break;let fH=aL(16,!0);let fI=fG.id;let fJ=aL(9,!0);for(let fK in fI){let fL=parseInt(fG.inbound[fK]);let fM={...fG};fM.id=aK();fM.subId=fH;fM.inbound=fL;fM.email=fJ+'-'+fK;let fN=await e.addClient(fM,fE);if(!fN.ok)break;let fO=await e.removeClient({id:fI[fK], inbound:fL},fE);if(!fO.ok)break;fM.usage=fG.up+fG.down;let fP=await e.changeClientUsage(fM,fE);if(!fP.ok)break}await c.updateFullRow({subId:[fC]},{subId:fH},'subscriptions');let _I=await c.getFullRow({subId:[fC]},'reservations');_I.data&&await c.updateFullRow({subId:[fC]},{subId:fH},'reservations');bD=`âœ… Ù„ÛŒÙ†Ú© Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ² Ø´Ø¯

Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯:
${l.credentials[fE].sub_address+fH}`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${fH}`}])}else if(bA.includes('prolongConfig_')){let fQ=bA.split('_')[1];let fR=await c.getFullRow({subId:[fQ]},'subscriptions');let fS=await e.getConfigInfo(fQ,fR.data.location);fS=fS.data;let fT=fS.totalGB;let fU=fS.limitIp;let fV=fS.expiryTime;let fW=Date.now();bE.push([]);if(fV!=0&&fW<=fV){p[aZ].previous=bA;fT!=0&&bE[0].push({text:'ğŸ”‹ Ø§ÙØ²Ø§ÛŒØ´ ØªØ±Ø§ÙÛŒÚ©',callback_data:`moreTraffic_${fQ}`});fU!=0&&bE[0].push({text:'ğŸ‘¥ Ø§ÙØ²Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:`moreUsers_${fQ}`});bE.push([{text:'ğŸ“± Ø±Ø²Ø±Ùˆ Ø³Ø±ÙˆÛŒØ³',callback_data:`serviceProlong_${fQ}`}])}else{q(aZ,`serviceProlong_${fQ}`,bB,_D,_e,F);return}bD='â¬†ï¸ Ø§Ø² Ø¨ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${fQ}`}])}else if(bA.includes('serviceProlong_')){let fX=bA.split('_')[1];let fY=await c.getFullRow({subId:[fX]},'subscriptions');var G=fY.data.location;let fZ=await z(_F,'chooseProlongDuration',fX);bD=`ğŸ“± Ø¨Ø§ Ø±Ø²Ø±Ùˆ Ù‡Ø± ÛŒÚ© Ø§Ø² Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§ÛŒ Ø²ÛŒØ±ØŒ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ù…Ø­Ø¶ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù† Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒØªÙˆÙ†ØŒ Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ØªÙˆÙ† ÙØ¹Ø§Ù„ Ù…ÛŒØ´Ù‡ 

${fZ.info}

âœ… Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:`;bE=fZ.buttons;if(fY.data.reserve!==''){let gA=fY.data.reserve.split('/');gA.pop();let gB=gA[gA.length-1];let gC=await c.getFullRow({reserve_id:[gB]},'reservations');if(gC.data.status=='pending'){let gD=gC.data;let gE=gD.traffic==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':gD.traffic+'GB';let gF=gD.duration==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':gD.duration+' Ù…Ø§Ù‡Ù‡';let gG=gD.ip==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':gD.ip+' Ú©Ø§Ø±Ø¨Ø±Ù‡';bD=`ğŸŸ¢ Ø´Ù…Ø§ Ø§Ø² Ù‚Ø¨Ù„ ÛŒÚ© Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø²Ø±Ùˆ Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯

ğŸ“± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø²Ø±Ùˆ Ø´Ø¯Ù‡:

ğŸ’¾ Ø­Ø¬Ù…: ${gE}
ğŸ“… Ø²Ù…Ø§Ù†: ${gF}
ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±: ${gG}`;bE=Array()}}bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:p[aZ].previous}])}else if(bA.includes('chooseProlongDuration_')){let gH=bA.split('_')[1];let gI=bA.split('_')[2];bD='â“ Ù„Ø·ÙØ§ Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:';bE=[[{text:'ğŸ“… ÛŒÚ©Ù…Ø§Ù‡Ù‡',callback_data:'prolongService_'+gH+'_1_'+gI}],[{text:'ğŸ“… Ø¯ÙˆÙ…Ø§Ù‡Ù‡',callback_data:'prolongService_'+gH+'_2_'+gI}],[{text:'ğŸ“… Ø³Ù‡ Ù…Ø§Ù‡Ù‡',callback_data:'prolongService_'+gH+'_3_'+gI}]];let gJ=await c.getFullRow({item_id:[gH]},'pricing');l.credentials[gJ.data.location].give_unlimited_duartion&&bE.push([{text:'â™¾ Ø²Ù…Ø§Ù† Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',callback_data:'prolongService_'+gH+'_0_'+gI}]);bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`serviceProlong_${gI}`}]);p[aZ].previous=bA}else if(bA.includes('prolongService_')){let gK=bA.split('_')[1];let gL=bA.split('_')[2];let gM=bA.split('_')[3];let gN=await c.getFullRow({item_id:[gK]},'pricing');gN=gN.data;let gO=gN.traffic==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':gN.traffic+'GB';let gP=gL==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':`${gL} Ù…Ø§Ù‡Ù‡`;let gQ=gN.ip_limit==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ â™¾':gN.ip_limit+' Ú©Ø§Ø±Ø¨Ø±Ù‡';let gR=await aA(gN.location,gL,gK);gR+=' ØªÙˆÙ…Ø§Ù†';let gS=await c.getFullRow({userid:[aZ]},'users');bA=bA.replace('prolongService_','prolongServiceConfirm_');bD=`â‰ï¸ Ø¯Ø±Ø­Ø§Ù„ Ø®Ø±ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³ Ø±Ø²Ø±Ùˆ Ø´Ø¯Ù‡ Ø¨Ø§ Ù…Ø´Ø®ØµØ§Øª Ø²ÛŒØ± Ù…ÛŒØ¨Ø§Ø´ÛŒØ¯:

ğŸ’¾ Ø­Ø¬Ù…: ${gO}
ğŸ“… Ø²Ù…Ø§Ù†: ${gP}
ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±: ${gQ}
ğŸ’µ Ù‡Ø²ÛŒÙ†Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯: ${aF(gR)}

ğŸ’³ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§: ${aF(gS.data.balance)}

â—ï¸ Ø§ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ø¨Ù‡ Ù…Ø­Ø¶ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù† Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ ÙØ¹Ø§Ù„ Ù…ÛŒØ´ÙˆØ¯

âœ… Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ø§ÛŒÙ† ØªØ±Ø§Ú©Ù†Ø´ Ù…ÙˆØ±Ø¯ ØªØ§ÛŒÛŒØ¯ Ø´Ù…Ø§ Ù…ÛŒØ¨Ø§Ø´Ø¯ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:`;bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ÛŒ',callback_data:bA}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`chooseProlongDuration_${gK}_${gM}`}]]}else if(bA.includes('prolongServiceConfirm_')){let gT=bA.split('_')[1];let gU=bA.split('_')[2];let gV=bA.split('_')[3];let gW=await c.getFullRow({item_id:gT},'pricing');gW=gW.data;let gX=await c.getFullRow({userid:[aZ]},'users');let gY=gW.price;let gZ=gW.ip_limit;let hA=gW.traffic;let hB=gW.location;let _J=aL(15,!0);await c.insertFullRow({userid:aZ, id:_J, price:gY, success:0, bought_item:'prolong_'+gT+'_'+gU, date:Date.now()},'payments');let _K=gX.data.balance;if(gY>_K){bD='âŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:p[aZ].previous}]);break}let _L=aL(10,!0);await c.insertFullRow({reserve_id:_L,subId:gV,ip:gZ,traffic:hA,duration:gU,location:hB,status:'pending'},'reservations');await c.updateFullRow({subId:[gV]},{reserve:`${_L}/`,sentNotice:1},'subscriptions');let _M=await c.changeUserBalance(aZ,`-${gY}`);let _N=gX.data.inviter;if(_N!=''){await c.changeUserBalance(_N,gY);aE(_N,0,`ğŸ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø®Ø±ÛŒØ¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø´Ù…Ø§ØŒ 10 Ø¯Ø±ØµØ¯ Ø§Ø² Ù…Ø¨Ù„Øº Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù‡Ø§ Ù…Ø¹Ø§Ø¯Ù„ ${gY} ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`,[],!1)}await c.updateFullRow({id:[_J]},{success:_M.ok},'payments');bD=`âœ… Ø±Ø²Ø±Ùˆ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯
Ø¨Ø§ Ø§ØªÙ…Ø§Ù… Ø¨Ø³ØªÙ‡ ÙØ¹Ù„ÛŒØŒ Ø¨Ø³ØªÙ‡ Ø¬Ø¯ÛŒØ¯ ÙØ¹Ø§Ù„ Ù…ÛŒØ´ÙˆØ¯âœ”ï¸`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${gV}`}])}else if(bA.includes('moreTraffic_')){let hC=bA.split('_')[1];let hD=await c.getFullRow({subId:[hC]},'subscriptions');let hE=await e.getConfigInfo(hC,hD.data.location);hE=hE.data;let hF=((hE.totalGB-(hE.up+hE.down))/1024**3).toFixed(2);bB=!1;bD=`â“ Ù…Ù‚Ø¯Ø§Ø±ÛŒ ØªØ±Ø§ÙÛŒÚ©ÛŒ Ú©Ù‡ Ù„Ø§Ø²Ù… Ø¯Ø§Ø±ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯

â™¾ Ø­Ø¬Ù… Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ: ${hF}GB

â—ï¸ Ø·Ø±ÛŒÙ‚Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡: Ø§Ú¯Ø± 10 Ú¯ÛŒÚ¯ Ø­Ø¬Ù… Ø§Ø¶Ø§ÙÙ‡ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒÙ† Ø¹Ø¯Ø¯ "10" Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø§Ù†Ù†Ø¯ Ø¢Ù†
â€¼ï¸ Ø¹Ø¯Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø² 1 Ø¨Ø²Ø±Ú¯ØªØ± Ùˆ Ø¹Ø¯Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø§Ø´Ø¯`;p[aZ].textReciever='moreDataTraffic';p[aZ].configName=hC;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`prolongConfig_${hC}`}])}else if(bA.includes('moreUsers_')){let hG=bA.split('_')[1];let hH=await c.getFullRow({subId:[hG]},'subscriptions');let hI=await e.getConfigInfo(hG,hH.data.location);bB=!1;p[aZ].textReciever='moreDataIP';p[aZ].configName=hG;bD=`ğŸ‘¥ Ú†Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø¸Ø±ÙÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ØŸ

ğŸ‘¤ Ø¸Ø±ÙÛŒØª Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ: ${hI.data.limitIp}`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`prolongConfig_${hG}`}])}else if(bA.includes('confirmAddData_')){let hJ=bA.split('_')[1];let hK=bA.split('_')[2];let hL=parseInt(bA.split('_')[3]);let hM=parseInt(bA.split('_')[4]);let hN=await c.getFullRow({userid:[aZ]},'users');if(hN.data.balance<hM){bD='âŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${hK}`}]);break}let hO=await c.getFullRow({subId:[hK]},'subscriptions');let hP=hO.data.location;let hQ=aL(15,!0);await c.insertFullRow({userid:aZ, id:hQ, price:hM, success:0, bought_item:hJ, date:Date.now()},'payments');let hR=await e.getConfigInfo(hK,hP);hR=hR.data;hJ=='Traffic'?(hR.totalGB+=hL*1024**3,hR.enable=!0):(hR.limitIp+=hL);let hS=hR.id;let hT=l.credentials[hP].inbounds;let hU=hR.email;for(let hX in A(hT)){hR.email=hU[hX];hR.id=hS[hX];hR.inbound=parseInt(A(hT)[hX]);let hY=await e.updateClient(hR,hP);if(!hY.ok)break}let hV=await c.changeUserBalance(aZ,`-${hM}`);let hW=hN.data.inviter;if(hW!=''){await c.changeUserBalance(hW,hM);aE(hW,0,`ğŸ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø®Ø±ÛŒØ¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø´Ù…Ø§ØŒ 10 Ø¯Ø±ØµØ¯ Ø§Ø² Ù…Ø¨Ù„Øº Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù‡Ø§ Ù…Ø¹Ø§Ø¯Ù„ ${hM} ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`,[],!1)}await c.updateFullRow({id:[hQ]},{success:hV.ok},'payments');bD='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±ØªÙ‚Ø§ ÛŒØ§ÙØª';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${hK}`}])}else if(bA.includes('recieveGift_')){let hZ=bA.split('_')[1];let iA=await c.getFullRow({code:[hZ]},'gifts');if(iA.data.users_id.includes(aZ)){bD='âŒ Ø´Ù…Ø§ Ø§ÛŒÙ† Ù‡Ø¯ÛŒÙ‡ Ø±Ø§ Ù‚Ø¨Ù„Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'gifts'}]);break}let iB=await c.useGift(aZ,hZ);switch(iB.code) {case 404:bD='âŒ Ø§ÛŒÙ† Ø¬Ø§ÛŒØ²Ù‡ Ø¯ÛŒÚ¯Ø± Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª';break;case 401:bD=`âŒ Ù…Ù‡Ù„Øª/Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø§ÛŒÙ† Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª`;break;case 200:bD=`âœ… ${iA.data.prize} ØªÙˆÙ…Ø§Ù† Ù‡Ø¯ÛŒÙ‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`;break}bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}])}else if(bA.includes('shopItems_')){let iC=bA.split('_')[1];let iD=await z(iC,'setDuration');bE=iD.buttons;bD=`${l.credentials[iC].name}\n\nğŸ› Ø³Ø±ÙˆÛŒØ³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:\n`;bD+=iD.info;let iE=A(l.credentials).length===1?'main_menu':'shop';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:iE}])}else if(bA.includes('setDuration_')){let iF=bA.split('_')[1];bD='â“ Ù„Ø·ÙØ§ Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:';bE=[[{text:'ğŸ“… ÛŒÚ©Ù…Ø§Ù‡Ù‡',callback_data:`buyItem_${iF}_1`}],[{text:'ğŸ“… Ø¯ÙˆÙ…Ø§Ù‡Ù‡',callback_data:`buyItem_${iF}_2`}],[{text:'ğŸ“… Ø³Ù‡ Ù…Ø§Ù‡Ù‡',callback_data:`buyItem_${iF}_3`}]];let iG=await c.getFullRow({item_id:[iF]},'pricing');let iH=iG.data.location;l.credentials[iH].give_unlimited_duartion&&bE.push([{text:'â™¾ Ø²Ù…Ø§Ù† Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',callback_data:`buyItem_${iF}_0`}]);bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`shopItems_${iH}`}])}else if(bA.includes('buyItem_')){let iI=bA.split('_')[1];let iJ=bA.split('_')[2];let iK=await c.getFullRow({item_id:[iI]},'pricing');iK=iK.data;let iL=iJ!=0?`${iJ} Ù…Ø§Ù‡Ù‡`:'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯';let iM=iK.ip_limit!=0?iK.ip_limit+' Ú©Ø§Ø±Ø¨Ø±Ù‡':'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯';let iN=iK.traffic!=0?iK.traffic+' Ú¯ÛŒÚ¯':'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯';let iO=iK.location;let iP=await aA(iO,iJ,iI);iP=aF(iP);bD=`â“ Ø§Ø² Ø®Ø±ÛŒØ¯ ${l.credentials[iO].name} Ø¨Ø§ Ù…Ø´Ø®ØµØ§Øª Ø²ÛŒØ± Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ

ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±: ${iM}
â³ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø²Ù…Ø§Ù†: ${iL}
ğŸ”‹ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø­Ø¬Ù…: ${iN}

ğŸ’ Ù‚ÛŒÙ…Øª: ${iP} ØªÙˆÙ…Ø§Ù†`;bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ù†Ù‡Ø§ÛŒÛŒ Ú©Ø±Ø¯Ù† Ø®Ø±ÛŒØ¯',callback_data:'confirmBuyItem_'+iI+'_'+iJ}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`setDuration_${iI}`}]]}else if(bA.includes('confirmBuyItem_')){let iQ=bA.split('_')[1];let iR=bA.split('_')[2];let iS=await c.getFullRow({item_id:[iQ]},'pricing');iS=iS.data;let iT=await aA(iS.location,iR,iQ);let iU=aL(15,!0);await c.insertFullRow({userid:aZ, id:iU, price:iT, success:0, bought_item:'newItem_'+iQ+'_'+iR, date:Date.now()},'payments');let iV=aF(iT);let iW=await c.getFullRow({userid:[aZ]},'users');if(iW.data.balance<iT){bD=`âŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ Ú©Ø§ÙÛŒ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø§ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ø¨Ù‡ ${iV} ØªÙˆÙ…Ø§Ù† Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒØ¯`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break}let iX=await c.changeUserBalance(aZ,`-${iT}`);let iY=iW.data.inviter;if(iY!=''){await c.changeUserBalance(iY,iT);aE(iY,0,`ğŸ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø®Ø±ÛŒØ¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø´Ù…Ø§ØŒ 10 Ø¯Ø±ØµØ¯ Ø§Ø² Ù…Ø¨Ù„Øº Ø®Ø±ÛŒØ¯ Ø¢Ù†Ù‡Ø§ Ù…Ø¹Ø§Ø¯Ù„ ${iT} ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`,[],!1)}await c.updateFullRow({id:[iU]},{success:iX.ok},'payments');let iZ=await aM(iQ,iR,aZ);if(!iZ.ok){bD=`â—ï¸ Ù…Ø´Ú©Ù„ÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÛŒÚ©Øª Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ø§ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ù‡ÛŒØ¯.
Ú©Ø¯ Ø§Ø±ÙˆØ±:
\`xE500_${iQ}_${iR}\``;bE=[[{text:'ğŸ‘¤ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ',callback_data:'support'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'main_menu'}]];break}bD=`âœ… Ø®Ø±ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯
Ø¬Ù‡Øª Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ù‡ Ø¨Ø®Ø´ "ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†" Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.`;bE=[[{text:'ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†',callback_data:'myConfigs_1'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'main_menu'}]]}else if(bA.includes('openTicket_')){let jA=await r(bA.split('_')[1],aZ,bA.split('_')[2]);bD=jA.message.substring(0,4096);bE=jA.button}else if(bA.includes('seeAllMessages_')){let jB=bA.split('_')[1];let jC=bA.split('_')[2];bD=`â• Ø§Ø² Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø§Ù…ÛŒ Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„/Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡ Ø¯Ø± ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${jB} Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ`;bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù‡Ù…Ù‡ Ù¾ÛŒØ§Ù… Ù‡Ø§',callback_data:'confirmSeeAllMessages_'+jB+'_'+jC}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'openTicket_'+jB+'_'+jC}]]}else{if(bA.includes('confirmSeeAllMessages_')){let jD=await r(bA.split('_')[1],aZ,bA.split('_')[2],!0);let jE=jD.message;let jF=jE.length;let jG=Math.ceil(jF/4096);for(let jH=0;jH<jG;jH++){bD=jE.substring(jH*4096,(jH+1)*4096-3);jH>0&&(bD=`...${bD}`);jH==jG-1&&(bE=jD.button);await aE(aZ,0,bD,bE,!1)}return}if(bA.includes('closeTicket_')){let jI=bA.split('_')[1];bD=`â—ï¸ Ø§Ø² Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${jI} Ù…Ø·Ù…Ø¦Ù† Ù…ÛŒØ¨Ø§Ø´ÛŒØ¯ØŸ`;let jJ=bA.split('_')[2];if(jJ=='openTickets/1')jJ='openTicket_'+jI+'_'+jJ;else jJ=='allTickets/1'&&(jJ='openTicket_'+jI+'_'+jJ);bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª',callback_data:`confirmCloseTicket_${jI}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:jJ}]]}else if(bA.includes('confirmCloseTicket_')){let jK=bA.split('_')[1];await c.updateFullRow({ticketId:[jK]},{status:'closed'},'tickets');bD='âœ… ØªÛŒÚ©Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø³ØªÙ‡ Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'}])}else if(bA.includes('respondTicket_')){let jL=bA.split('_')[1];let jM=bA.split('_')[2];if(jM=='openTickets/1')jM='openTicket_'+jL+'_'+jM;else jM=='allTickets/1'&&(jM='openTicket_'+jL+'_'+jM);p[aZ].textReciever='userResponseTicket';p[aZ].ticketId=jL;p[aZ].previous=jM;bD='â‰ï¸ Ù„Ø·ÙØ§ Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:jM}])}else if(bA.includes('userBalance_')){let jN=bA.split('_')[1];bD='â“ Ù„Ø·ÙØ§ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:';bE=[[{text:'â– Ú©Ø§Ù‡Ø´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ',callback_data:`changeTheBalance_decrease_${jN}`},{text:'â• Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ',callback_data:`changeTheBalance_increase_${jN}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${jN}`}]]}else if(bA.includes('changeTheBalance_')){let jO=bA.split('_')[1];let jP=bA.split('_')[2];p[aZ].textReciever='changeTheBalance';p[aZ].usersid=jP;p[aZ].balanceQuery=jO;jO=='decrease'?bD='â—ï¸ Ù„Ø·ÙØ§ Ù…Ù‚Ø¯Ø§Ø± Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ú©Ø§Ø±Ø¨Ø± Ú©Ù… Ú©Ù†ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:':bD='â—ï¸ Ù„Ø·ÙØ§ Ù…Ù‚Ø¯Ø§Ø± Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userBalance_${jP}`}])}else if(bA.includes('userConfigs_')){let jQ=bA.split('_')[1];let jR=parseInt(bA.split('_')[2]);let jS=await c.getUserSubs(jQ);jS=jS.data;!jR&&(jR=1);let jT=20*(jR-1);while (jT<20*jR&&jT<jS.length) {let jW=jS[jT].subId;let jX=await c.getFullRow({subId:[jW]},'subscriptions');let jY=await e.getConfigInfo(jW,jX.data.location);if(!1){jT++;continue}let jZ=jY.data;let kA=jZ.totalGB;let kB=jZ.up+jZ.down;let kC=jZ.expiryTime;let kD=Date.now();let kE;switch(jX.data.status) {case 'active':!jZ.enable||(kA!=0&&kB>=kA)||(kC!=0&&kC<=kD)?kE='ğŸ”´ ':kE='ğŸŸ¢ ';break;default:kE='ğŸŸ¡ ';break}kE+=jX.data.name;let kF=`getUserConfigDetails_${jQ}_${jX.data.subId}`;let kG={text:kE,callback_data:kF};jT%2==0?bE.push([kG]):bE[bE.length-1].push(kG);jT++}let jU=Array();if(jR!=1){let kH=jR-1;jU.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:'userConfigs_'+jQ+'_'+kH})}jU.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${jQ}`});let jV=Math.ceil(jS.length/20);if(jR!=jV){let kI=jR+1;jU.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:'userConfigs_'+jQ+'_'+kI})}jR==1&&bE.push([{text:'â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯',callback_data:`addNewConfigForClient_${jQ}`}]);bE.push(jU);bD=`ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ ${jQ}

ØµÙØ­Ù‡ ${jR}

        âšœï¸Ù„Ø·ÙØ§ Ø§Ø² Ù„ÛŒØ³Øª Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ ÛŒÚ©ÛŒ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:
        
        â” Ø±Ø§Ù‡Ù†Ù…Ø§:
        ğŸŸ¢ : Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ø§Ù„
        ğŸŸ¡ : Ø³Ø±ÙˆÛŒØ³ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ù‚Ø·Ø¹ Ø´Ø¯Ù‡
        ğŸ”´ : Ø²Ù…Ø§Ù†/Ø­Ø¬Ù… Ø³Ø±ÙˆÛŒØ³ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡`}else if(bA.includes('getUserConfigDetails_')){let kJ=bA.split('_')[1];let kK=bA.split('_')[2];let kL=await c.getFullRow({subId:[kK]},'subscriptions');kL=kL.data;let kM=await e.getConfigInfo(kK,kL.location);let kN=kM.data;let kO=kN.totalGB/1024**3;let kP=kO-(kN.up+kN.down)/1024**3;let kQ=kL.name;let kR=kL.owner_id;let kS=kN.limitIp;let kT=kN.expiryTime;let kU=kL.status;let kV=kL.users_id;let kW='';let _O=!1;if(kU=='active'){let kX=kN.totalGB;let kY=kN.up;let kZ=kN.down;let lA=kN.expiryTime;let lB=Date.now();!kN.enable||(kX!=0&&kY+kZ>=kX)||(lA!=0&&lA<=lB)?kU='ğŸ”´ Ø¨Ù‡ Ø§ØªÙ…Ø§Ù… Ø±Ø³ÛŒØ¯Ù‡':kU='ğŸŸ¢ ÙØ¹Ø§Ù„'}else kU='ğŸŸ¡ Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡';let _p='';kV=kV.split('/');kV.pop();_p+='ğŸ’» Ø§ÙØ±Ø§Ø¯ Ø²ÛŒØ± Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯:\n';for(let lC in kV){let lD=kV[lC];let lE=++lC;_p+=`${lE}- \`${lD}\``;_p+='\n'}kR=`\`${kR}\``;kP=kP.toFixed(2)+'GB';kO==0?(kO='â™¾ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',kW=`âŒ›ï¸ Ø­Ø¬Ù… Ù…ØµØ±Ù Ø´Ø¯Ù‡: ${kP}`):(kO=kO.toFixed(2)+'GB',kW=`âŒ›ï¸ Ø­Ø¬Ù… Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡: ${kP}`);kS==0?kS='âŒ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª':kS+=' Ú©Ø§Ø±Ø¨Ø±';if(kT==0)kT='â™¾ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯';else{let lF=new Date(kT);let lG=lF.toLocaleString('en-US',{timeZone:'Asia/Tehran',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:!1});kT=g(lF,'YYYY/M/D').locale('fa').format('YYYY/M/D')+' - '+lG}bD=`ğŸ“± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ù†ÙÛŒÚ¯ ${kQ}:

âšªï¸ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ÙÛŒÚ¯: ${kU}

ğŸ‘¤ ØµØ§Ø­Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯: ${kR}
â³ Ø­Ø¬Ù… Ú©Ø§Ù†ÙÛŒÚ¯: ${kO}
ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ù‡Ù…Ø²Ù…Ø§Ù†: ${kS}

${kW}
ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§: ${kT}

${_p}`;let _q,_r;_O?(_q='âŒ ØºÛŒØ± ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯',_r='disableUserConfig_'):(_q='âœ… ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯',_r='enableUserConfig_');bE=[[{text:_q,callback_data:_r+kJ+'_'+kK}],[{text:'ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:'recieveUsersConfig_'+kJ+'_'+kK},{text:'ğŸ”± Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',callback_data:'manageUsersConfig_'+kJ+'_'+kK}],[{text:'â³ ØªØºÛŒÛŒØ± Ø­Ø¬Ù… Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:'changeUserConfigs_'+kJ+'_'+kK+'_data'},{text:'âš ï¸ ØªØºÛŒÛŒØ± Ø­Ø¬Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡',callback_data:'changeUserConfigs_'+kJ+'_'+kK+'_usage'}],[{text:'ğŸ‘¥ ØªØºÛŒÛŒØ± Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±',callback_data:'changeUserConfigs_'+kJ+'_'+kK+'_IP'},{text:'ğŸ“… ØªØºÛŒÛŒØ± ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§',callback_data:'changeUserConfigs_'+kJ+'_'+kK+'_expiry'}],[{text:'âŒ Ø­Ø°Ù',callback_data:'deleteUsersConfig_'+kJ+'_'+kK},{text:'ğŸ§‘â€ğŸ’» ØªØºÛŒÛŒØ± ØµØ§Ø­Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:'changeUserConfigs_'+kJ+'_'+kK+'_owner'}],[{text:'â™»ï¸ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯',callback_data:'changeUserConfigsSubId_'+kJ+'_'+kK}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userConfigs_${kJ}`}]]}else if(bA.includes('disableUserConfig_')){let lH=bA.split('_')[1];let lI=bA.split('_')[2];bD='â—ï¸ Ø§Ø² ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ';bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù†',callback_data:'confirmDisableUserConfig_'+lH+'_'+lI}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+lH+'_'+lI}]]}else if(bA.includes('confirmDisableUserConfig_')){let lJ=bA.split('_')[1];let lK=bA.split('_')[2];let lL=await c.getFullRow({subId:[lK]},'subscriptions');lL=lL.data;let lM=await e.getConfigInfo(lK,lL.location);lM=lM.data;for(let lN in lM.id){let lO={...lM};lO.id=lM.id[lN];lO.email=lM.email[lN];lO.inbound=lM.inbound[lN];lO.enable=!1;await e.updateClient(lO,lL.location)}await c.updateFullRow({subId:[lK]},{status:'stopped'},'subscriptions');bD='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+lJ+'_'+lK}])}else if(bA.includes('enableUserConfig_')){let lP=bA.split('_')[1];let lQ=bA.split('_')[2];bD='â—ï¸ Ø§Ø² ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ';bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù†',callback_data:'confirmEnableUserConfig_'+lP+'_'+lQ}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+lP+'_'+lQ}]]}else if(bA.includes('confirmEnableUserConfig_')){let lR=bA.split('_')[1];let lS=bA.split('_')[2];let lT=await c.getFullRow({subId:[lS]},'subscriptions');lT=lT.data;let lU=await e.getConfigInfo(lS,lT.location);lU=lU.data;for(let lV in lU.id){let lW={...lU};lW.id=lU.id[lV];lW.email=lU.email[lV];lW.inbound=lU.inbound[lV];lW.enable=!0;await e.updateClient(lW,lT.location)}await c.updateFullRow({subId:[lS]},{status:'active'},'subscriptions');bD='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+lR+'_'+lS}])}else if(bA.includes('recieveUsersConfig_')){let lX=bA.split('_')[1];let lY=bA.split('_')[2];let lZ=await c.getFullRow({subId:[lY]},'subscriptions');lZ=lZ.data;let mA=lZ.location;let mB=await e.getConfigInfo(lY,mA);mB=mB.data;let mC='';for(let mD in mB.id){let mE=mB.inbound[mD];let mF=l.credentials[mA].inbounds[mE];let mG={ps:mB.email[mD],add:l.credentials[mA].panel_address,port:mF[0],id:mB.id[mD]};let mH='';if(mF[2]=='vmess')mH=aG(mG);else mF[2]=='vless'&&(mH=aH(mG));mC+=`\`${mH}\n\n\``}bD=`ğŸ”— Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯:
\`${l.credentials[mA].sub_address+lY}\`

ğŸ”‘ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªÛŒ:
${mC}`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+lX+'_'+lY}])}else if(bA.includes('manageUsersConfig_')){let mI=bA.split('_')[1];let mJ=bA.split('_')[2];let mK=await c.getFullRow({subId:[mJ]},'subscriptions');mK=mK.data;let mL=mK.owner_id;let mM=mK.users_id.split('/');mM.pop();bD='ğŸ‘¥ Ø§ÙØ±Ø§Ø¯ Ø²ÛŒØ± Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯:\n\n';let mN=0;for(let mO of mM){mN++;bD+=`${mN}- \`${mO}\``;mO==mL&&(bD+=' - owner');bD+='\n'}bE=[[{text:'âœ–ï¸ Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±',callback_data:'userConfigsUsers_'+mI+'_'+mJ+'_delete'},{text:'â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±',callback_data:'userConfigsUsers_'+mI+'_'+mJ+'_add'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+mI+'_'+mJ}]]}else if(bA.includes('userConfigsUsers_')){let mP=bA.split('_')[1];let mQ=bA.split('_')[2];let mR=bA.split('_')[3];p[aZ].textReciever='userConfigsUser';p[aZ].userConfigsQuery=mR;p[aZ].usersid=mP;p[aZ].subId=mQ;bD='â” Ù„Ø·ÙØ§ Ø´Ù†Ø§Ø³Ù‡ Ø´Ø®Øµ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+mP+'_'+mQ}])}else if(bA.includes('changeUserConfigs_')){let mS=bA.split('_')[1];let mT=bA.split('_')[2];let mU=bA.split('_')[3];p[aZ].textReciever='changeUserConfigs';p[aZ].usersid=mS;p[aZ].subId=mT;p[aZ].changeQuery=mU;switch(mU) {case 'data':bD='â” Ù„Ø·ÙØ§ Ø­Ø¬Ù… Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨Ù‡ Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯):\n\nâ• Ø¨Ø±Ø§ÛŒ Ø­Ø¬Ù… Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ù„Ø·ÙØ§ Ø¹Ø¯Ø¯ 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';break;case 'usage':bD='â” Ù„Ø·ÙØ§ Ø­Ø¬Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨Ù‡ Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯):';break;case 'IP':bD='â” Ù„Ø·ÙØ§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ \n\nâ• Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ù„Ø·ÙØ§ Ø¹Ø¯Ø¯ 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';break;case 'expiry':bD='â” Ù„Ø·ÙØ§ ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨Ù‡ Ø±ÙˆØ² Ù…Ø­Ø³Ø§Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯): \n\nâ• Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø²Ù…Ø§Ù† Ø§Ù†Ù‚Ø¶Ø§ Ù„Ø·ÙØ§ Ø¹Ø¯Ø¯ 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯\nâ• Ø¨Ù‡ Ø·ÙˆØ± Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ Ø¨Ù‡ ÛŒÚ©Ù…Ø§Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡ Ø¹Ø¯Ø¯ 30 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';break;case 'owner':bD='â” Ù„Ø·ÙØ§ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ ØµØ§Ø­Ø¨ Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯: \n\nâ• ØµØ§Ø­Ø¨ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ÛŒØ¯ ÛŒÚ©ÛŒ Ø§Ø² Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ÛŒ Ø¨Ø§Ø´Ø¯ Ú©Ù‡ Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯';break}bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+mS+'_'+mT}])}else if(bA.includes('changeUserConfigsSubId_')){let mV=bA.split('_')[1];let mW=bA.split('_')[2];bD='â‰ï¸ Ø§Ø² Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ \n\nâ—ï¸ Ø§ØªØµØ§Ù„ ØªÙ…Ø§Ù…ÛŒ Ø§ÙØ±Ø§Ø¯ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù‚Ø·Ø¹ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ù„ÛŒÙ†Ú© Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø¬Ø¯Ø¯Ø§ Ø§Ø² Ø¯Ø§Ø®Ù„ Ø±Ø¨Ø§Øª Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ù†Ø¯ ';bE.push([{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯',callback_data:'confirmGetUserNewSubId_'+mV+'_'+mW}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+mV+'_'+mW}])}else if(bA.includes('confirmGetUserNewSubId_')){let mX=bA.split('_')[1];let mY=bA.split('_')[2];let mZ=await c.getFullRow({subId:[mY]},'subscriptions');mZ=mZ.data;let nA=mZ.location;let nB=await e.getConfigInfo(mY,nA);nB=nB.data;let nC=aL(16,!0);let nD=aL(9,!0);for(let nF in nB.id){let nG=parseInt(nB.inbound[nF]);let nH={...nB};nH.id=aK();nH.subId=nC;nH.inbound=nG;nH.email=nD+'-'+nF;let nI=await e.addClient(nH,nA);if(!nI.ok)break;let nJ=await e.removeClient({id:nB.id[nF], inbound:nG},nA);if(!nJ.ok)break;nH.usage=nB.up+nB.down;let nK=await e.changeClientUsage(nH,nA);if(!nK.ok)break}await c.updateFullRow({subId:[mY]},{subId:nC},'subscriptions');let nE=await c.getFullRow({subId:[mY]},'reservations');nE.data&&await c.updateFullRow({subId:[mY]},{subId:nC},'reservations');bD='âœ… Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ² Ø´Ø¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+mX+'_'+nC}])}else if(bA.includes('deleteUsersConfig_')){let nL=bA.split('_')[1];let nM=bA.split('_')[2];let nN=await e.getRandomWords(1,6);nN=nN.data[0];p[aZ].textReciever='confirmDeleteUserConfig';p[aZ].randomString=nN;p[aZ].usersid=nL;p[aZ].subId=nM;bD=`â‰ï¸ Ø§Ú¯Ø± Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŒ Ù„Ø·ÙØ§ Ú©Ù„Ù…Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:
          
\`${nN}\``;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+nL+'_'+nM}])}else if(bA.includes('respondUsersTicket_')){let nO=bA.split('_')[1];bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);let nP=await c.getFullRow({ticketId:[nO]},'tickets');nP=nP.data;if(nP.status=='closed'){bD='âŒ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø§Ù…Ú©Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø¨Ù‡ Ø¢Ù† Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}else nP.status=='support_response'?bD='â‰ï¸ Ø¨Ù‡ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ù‚Ø¨Ù„Ø§ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡\nØ§Ú¯Ø± Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù¾Ø§Ø³Ø® Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø¢Ù† Ø«Ø¨Øª Ú©Ù†ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ø¨ÙØ±Ø³ØªÛŒØ¯:':bD='â• Ù„Ø·ÙØ§ Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:';p[aZ].textReciever='respondUsersTicket';p[aZ].ticketId=nO}else if(bA.includes('supportTickets_')){let nQ=parseInt(bA.split('_')[1]);let nR=await c.getAllRows({},'tickets');nR=nR.data;nR.sort((a,b)=>{if(a.status!==b.status){var statusOrder=['user_response','support_response','closed'];return (statusOrder.indexOf(a.status)-statusOrder.indexOf(b.status))}return b.last_response-a.last_response});!nQ&&(nQ=1);p[aZ].textReciever='getUserTicketById';bD=`ğŸ“¨ ØªÙ…Ø§Ù…ÛŒ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø¯Ø± Ø±Ø¨Ø§Øª Ø±Ùˆ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

ØµÙØ­Ù‡ ${nQ}

â‰ï¸ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ Ø¨ÛŒØ´ØªØ± Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¢Ù† Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯
â”Ø±Ø§Ù‡Ù†Ù…Ø§:

ğŸŸ¢: Ù…Ù†ØªØ¸Ø± Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
ğŸŸ¡: Ù…Ù†ØªØ¸Ø± Ù¾Ø§Ø³Ø® Ú©Ø§Ø±Ø¨Ø±
ğŸ”´: ØªÛŒÚ©Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡`;let nS=20*(nQ-1);while (nS<20*nQ&&nS<nR.length) {let nW=nR[nS];let nX=nW.ticketId;let nY=nW.status;let nZ;if(nY=='closed')nZ='ğŸ”´ ';else if(nY=='user_response')nZ='ğŸŸ¢ ';else nY=='support_response'&&(nZ='ğŸŸ¡ ');nZ+=nW.subject+' - '+nX;let oA=`seeUserTicket_${nX}`;let oB={text:nZ,callback_data:oA};nS%2==0?bE.push([oB]):bE[bE.length-1].push(oB);nS++}let nT=Array();let nU=Array();if(nQ!=1){let oC=nQ-1;nT.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:'supportTickets_'+1});nU.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`supportTickets_${oC}`})}nU.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'main_menu'});let nV=Math.ceil(nR.length/20);if(nQ!=nV){let oD=nQ+1;nT.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`supportTickets_${nV}`});nU.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`supportTickets_${oD}`})}bE.push(nT);bE.push(nU)}else if(bA.includes('allTickets/')){let oE=parseInt(bA.split('/')[1]);let oF=await c.getAllRows({userid:[aZ]},'tickets');oF=oF.data;oF.sort((a,b)=>{if(a.status!==b.status){var statusOrder=['support_response','user_response','closed'];return (statusOrder.indexOf(a.status)-statusOrder.indexOf(b.status))}return b.last_response-a.last_response});!oE&&(oE=1);p[aZ].textReciever='getTicketById';p[aZ].previousPage='allTickets/1';bD=`ğŸ“¨ ØªÙ…Ø§Ù…ÛŒ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡ ØªØ§Ù† Ø¯Ø± Ø±Ø¨Ø§Øª Ø±Ùˆ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

ØµÙØ­Ù‡ ${oE}

â‰ï¸ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ Ø¨ÛŒØ´ØªØ± Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¢Ù† Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯
â”Ø±Ø§Ù‡Ù†Ù…Ø§:

ğŸŸ¢: Ù…Ù†ØªØ¸Ø± Ù¾Ø§Ø³Ø® Ø´Ù…Ø§
ğŸŸ¡: Ù…Ù†ØªØ¸Ø± Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
ğŸ”´: ØªÛŒÚ©Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡`;let oG=20*(oE-1);while (oG<20*oE&&oG<oF.length) {let oK=oF[oG];let oL=oK.ticketId;let oM=oK.status;let oN;if(oM=='closed')oN='ğŸ”´ ';else if(oM=='support_response')oN='ğŸŸ¢ ';else oM=='user_response'&&(oN='ğŸŸ¡ ');oN+=oK.subject+' - '+oL;let oO=`openTicket_${oL}_allTickets/1`;let oP={text:oN,callback_data:oO};oG%2==0?bE.push([oP]):bE[bE.length-1].push(oP);oG++}let oH=Array();let oI=Array();if(oE!=1){let oQ=oE-1;oH.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:'allTickets_'+1});oI.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`allTickets_${oQ}`})}oI.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'});let oJ=Math.ceil(oF.length/20);if(oE!=oJ){let oR=oE+1;oH.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`allTickets_${oJ}`});oI.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`allTickets_${oR}`})}bE.push(oH);bE.push(oI)}else if(bA.includes('openTickets/')){let oS=parseInt(bA.split('/')[1]);let oT=await c.getAllRows({userid:[aZ]},'tickets');oT=oT.data;let oU=Array();for(let oZ of oT)oZ.status!='closed'&&oU.push(oZ);oT=[...oU];oT.sort((a,b)=>{if(a.status!==b.status){var statusOrder=['support_response','user_response','closed'];return (statusOrder.indexOf(a.status)-statusOrder.indexOf(b.status))}return b.last_response-a.last_response});!oS&&(oS=1);p[aZ].textReciever='getTicketById';p[aZ].previousPage='openTickets/1';bD=`ğŸ“¨ ØªÙ…Ø§Ù…ÛŒ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ Ø¨Ø§Ø² Ø±Ø§ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

ØµÙØ­Ù‡ ${oS}

â‰ï¸ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ Ø¨ÛŒØ´ØªØ± Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¢Ù† Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯`;let oV=20*(oS-1);while (oV<20*oS&&oV<oT.length) {let pA=oT[oV];let pB=pA.ticketId;let pC=pA.status;let pD='';pD+=pA.subject+' - '+pB;let pE=`openTicket_${pB}_openTickets/1`;pC=='support_response'&&(pD+=' ğŸŸ¢ +1');let pF={text:pD,callback_data:pE};oV%2==0?bE.push([pF]):bE[bE.length-1].push(pF);oV++}let oW=Array();let oX=Array();if(oS!=1){let pG=oS-1;oW.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:'openTickets_'+1});oX.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`openTickets_${pG}`})}oX.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'});let oY=Math.ceil(oT.length/20);if(oS!=oY){let pH=oS+1;oW.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`openTickets_${oY}`});oX.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`openTickets_${pH}`})}bE.push(oW);bE.push(oX)}else if(bA.includes('seeUserTicket_')){let pI=bA.split('_')[1];let pJ=await s(pI);let pK=pJ.message;let pL=Math.ceil(pK.length/4096);for(let pM=0;pM<pL;pM++){bD=pK.substring(pM*4096,(pM+1)*4096-3);pM>0&&(bD=`...${bD}`);pM==pL-1&&(bE=pJ.button);await aE(aZ,0,bD,bE,!1)}if(bA.split('_')[2]=='watchingUser'){let pN=await c.getFullRow({ticketId:[pI]},'tickets');bE[bE.length-1][0].callback_data='userTickets_'+pN.data.userid+'_1'}}else if(bA.includes('closeUserTicket_')){let pO=bA.split('_')[1];bD=`â—ï¸ Ø¢ÛŒØ§ Ø§Ø² Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${pO} Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ`;bE=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª',callback_data:`confirmCloseUserTicket_${pO}`}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserTicket_${pO}`}]]}else if(bA.includes('confirmCloseUserTicket_')){let pP=bA.split('_')[1];await c.updateFullRow({ticketId:[pP]},{status:'closed'},'tickets');bD=`âœ… ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${pP} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø³ØªÙ‡ Ø´Ø¯`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserTicket_${pP}`}])}else if(bA.includes('myConfigs_')){let pQ=parseInt(bA.split('_')[1]);let pR=await c.getUserSubs(aZ);pR=pR.data;!pQ&&(pQ=1);let pS=20*(pQ-1);while (pS<20*pQ&&pS<pR.length) {let pV=pR[pS].subId;let pW=await c.getFullRow({subId:[pV]},'subscriptions');let pX=await e.getConfigInfo(pV,pW.data.location);if(!1){pS++;continue}let pY=pX.data;let pZ=pY.totalGB;let qA=pY.up+pY.down;let qB=pY.expiryTime;let qC=Date.now();let qD;switch(pW.data.status) {case 'active':!pY.enable||(pZ!=0&&qA>=pZ)||(qB!=0&&qB<=qC)?qD='ğŸ”´ ':qD='ğŸŸ¢ ';break;default:qD='ğŸŸ¡ ';break}qD+=pW.data.name;let qE=`configInfo_${pW.data.subId}`;let qF={text:qD,callback_data:qE};pS%2==0?bE.push([qF]):bE[bE.length-1].push(qF);pS++}let pT=Array();if(pQ!=1){let qG=pQ-1;pT.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`myConfigs_${qG}`})}pT.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'main_menu'});let pU=Math.ceil(pR.length/20);if(pQ!=pU){let qH=pQ+1;pT.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`myConfigs_${qH}`})}pQ==1&&bE.push([{text:'ğŸ’  Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÛŒ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:'addMyConfig'}]);bE.push(pT);bD=`ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø´Ù…Ø§

ØµÙØ­Ù‡ ${pQ}

        âšœï¸Ù„Ø·ÙØ§ Ø§Ø² Ù„ÛŒØ³Øª Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ØªÙˆÙ† ÛŒÚ©ÛŒ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:
        
        â” Ø±Ø§Ù‡Ù†Ù…Ø§:
        ğŸŸ¢ : Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ø§Ù„
        ğŸŸ¡ : Ø³Ø±ÙˆÛŒØ³ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ù‚Ø·Ø¹ Ø´Ø¯Ù‡
        ğŸ”´ : Ø²Ù…Ø§Ù†/Ø­Ø¬Ù… Ø³Ø±ÙˆÛŒØ³ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡`}else if(bA.includes('addNewConfigForClient_')){let qI=bA.split('_')[1];let qJ=A(l.credentials);for(let qK of qJ){if(!l.credentials[qK].active)continue;bE.push([{text:l.credentials[qK].name,callback_data:'addNewConfigForUser_'+qI+'_'+qK}])}bD='â• Ù„Ø·ÙØ§ Ù†ÙˆØ¹ Ø³Ø±ÙˆÛŒØ³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userConfigs_${qI}`}])}else if(bA.includes('addNewConfigForUser_')){let qL=bA.split('_')[1];let qM=bA.split('_')[2];p[aZ].textReciever='getNewConfigTraffic';p[aZ].targetUsersId=qL;p[aZ].newConfigLocation=qM;bD='â” Ù„Ø·ÙØ§ Ù…Ù‚Ø¯Ø§Ø± ØªØ±Ø§ÙÛŒÚ© Ù…Ø¯ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨Ù‡ Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯): \n\nâ• Ø¨Ø±Ø§ÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';bE=[[{text:'ğŸ”™ Ù…Ø±Ø­Ù„Ù‡ Ù‚Ø¨Ù„',callback_data:`addNewConfigForClient_${qL}`}],[{text:'ğŸ”š Ù„ØºÙˆ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userConfigs_${qL}`}]]}else if(bA.includes('userTickets_')){let qN=bA.split('_')[1];let qO=parseInt(bA.split('_')[2]);let qP=await c.getAllRows({userid:[qN]},'tickets');qP=qP.data;qP.sort((a,b)=>{if(a.status!==b.status){var statusOrder=['user_response','support_response','closed'];return (statusOrder.indexOf(a.status)-statusOrder.indexOf(b.status))}return b.last_response-a.last_response});!qO&&(qO=1);bD=`ğŸ“¨ ØªÙ…Ø§Ù…ÛŒ ØªÛŒÚ©Øª Ù‡Ø§ÛŒ ${qN} Ø±Ø§ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

ØµÙØ­Ù‡ ${qO}`;let qQ=20*(qO-1);while (qQ<20*qO&&qQ<qP.length) {let qU=qP[qQ];let qV=qU.ticketId;let qW=qU.status;let qX;if(qW=='closed')qX='ğŸ”´ ';else if(qW=='user_response')qX='ğŸŸ¢ ';else qW=='support_response'&&(qX='ğŸŸ¡ ');qX+=qU.subject+' - '+qV;let qY=`seeUserTicket_${qV}_watchingUser`;let qZ={text:qX,callback_data:qY};qQ%2==0?bE.push([qZ]):bE[bE.length-1].push(qZ);qQ++}let qR=Array();let qS=Array();if(qO!=1){let rA=qO-1;qR.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:`userTickets_${qN}_${1}`});qS.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`userTickets_${qN}_${rA}`})}qS.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${qN}`});let qT=Math.ceil(qP.length/20);if(qO!=qT){let rB=qO+1;qR.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`userTickets_${qN}_${qT}`});qS.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`userTickets_${qN}_${rB}`})}bE.push(qR);bE.push(qS)}else if(bA.includes('userPayments_')){let rC=bA.split('_')[1];let rD=!1;rC==0&&(rC=aZ,rD=!0);let rE=parseInt(bA.split('_')[2]);let rF=await c.getAllRows({userid:[rC]},'payments');rF=rF.data;rF.sort((a,b)=>b.date-a.date);!rE&&(rE=1);let rG=rD?'Ø´Ù…Ø§':rC;bD=`ğŸ’³ ØªÙ…Ø§Ù…ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø§ÛŒ Ù…ÙˆÙÙ‚ Ùˆ Ù†Ø§Ù…ÙˆÙÙ‚ ${rG} Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒ Ø¨Ø§Ø´Ø¯:

ØµÙØ­Ù‡ ${rE}`;let rH=20*(rE-1);while (rH<20*rE&&rH<rF.length) {let rM=rF[rH];let rN=rM.id;let rO=rM.success;let rP=rM.bought_item;let rQ=rO==1?'ğŸŸ¢ ':'ğŸ”´ ';if(rP.includes('newItem'))rQ+='Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯';else if(rP.includes('prolong'))rQ+='ØªÙ…Ø¯ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³';else if(rP=='IP')rQ+='Ú©Ø§Ø±Ø¨Ø± Ø§Ø¶Ø§ÙÙ‡';else rP=='Traffic'&&(rQ+='ØªØ±Ø§ÙÛŒÚ© Ø§Ø¶Ø§ÙÙ‡');let rR=rD?`seePayment_${rN}`:`seePayment_${rN}_watchingUser`;let rS={text:rQ,callback_data:rR};rH%2==0?bE.push([rS]):bE[bE.length-1].push(rS);rH++}let rI=Array();let rJ=Array();if(rE!=1){let rT=rE-1;rI.push({text:'â¤´ï¸ Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡',callback_data:`userPayments_${rC}_${1}`});rJ.push({text:'â—€ï¸ ØµÙØ­Ù‡ Ù‚Ø¨Ù„',callback_data:`userPayments_${rC}_${rT}`})}let rK=rD?'main_menu':`seeUserStats_${rC}`;rJ.push({text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:rK});let rL=Math.ceil(rF.length/20);if(rE!=rL){let rU=rE+1;rI.push({text:'â¤´ï¸ Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡',callback_data:`userPayments_${rC}_${rL}`});rJ.push({text:'â–¶ï¸ ØµÙØ­Ù‡ Ø¨Ø¹Ø¯',callback_data:`userPayments_${rC}_${rU}`})}bE.push(rI);bE.push(rJ)}else if(bA.includes('seePayment_')){let rV=bA.split('_')[1];let rW=bA.split('_')[2];let rX=await c.getFullRow({id:[rV]},'payments');rX=rX.data;let rY=rX.success?'ğŸŸ¢ Ù…ÙˆÙÙ‚':'ğŸ”´ Ù†Ø§Ù…ÙˆÙÙ‚';let rZ=rX.date;let sA=new Date(rZ);let sB=sA.toLocaleString('en-US',{timeZone:'Asia/Tehran',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:!1});rZ=g(sA,'YYYY/M/D').locale('fa').format('YYYY/M/D')+' - '+sB;let sC=rX.bought_item;if(sC.includes('newItem'))sC='Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯';else if(sC.includes('prolong'))sC='ØªÙ…Ø¯ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³';else if(sC=='IP')sC='Ú©Ø§Ø±Ø¨Ø± Ø§Ø¶Ø§ÙÙ‡';else sC=='Traffic'&&(sC='ØªØ±Ø§ÙÛŒÚ© Ø§Ø¶Ø§ÙÙ‡');bD=`â• Ù…Ø´Ø®ØµØ§Øª ØªØ±Ø§Ú©Ù†Ø´

ğŸ†” Ú©Ø¯ ØªØ±Ø§Ú©Ù†Ø´: \`${rX.id}\`
â–«ï¸ ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´: ${rY}
ğŸ’³ Ù‚ÛŒÙ…Øª ØªØ±Ø§Ú©Ù†Ø´: ${aF(rX.price)} ØªÙˆÙ…Ø§Ù†
ğŸ• ØªØ§Ø±ÛŒØ® ØªØ±Ø§Ú©Ù†Ø´: ${rZ}

ğŸ“± Ø¢ÛŒØªÙ… Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡: ${sC}`;let sD=rW=='watchingUser'?'seeUserStats_'+rX.userid:'userPayments_0_1';bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:sD}])}else if(bA.includes('restart_')){let sE=bA.split('_')[1];bD=`â‰ï¸ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ø±Ø¯Ù† Ù‡Ø³ØªÙ‡ x-ray Ø¯Ø± Ø³Ø±ÙˆØ± ${sE} Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ`;bE.push([{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø±ÛŒØ³ØªØ§Ø±Øª',callback_data:`confirmRestart_${sE}`}]);bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'restart'}])}else if(bA.includes('confirmRestart_')){let sF=bA.split('_')[1];await e.restartXray(sF);bD=`âœ… Ù‡Ø³ØªÙ‡ x-ray Ø¯Ø± Ø³Ø±ÙˆØ± ${sF} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±ÛŒØ³ØªØ§Ø±Øª Ø´Ø¯`;bE.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'}])}}break}aE(aZ,_D,bD,bE,bB)}catch(sG){q(aZ,'main_menu',bB,_D,_e,F);d.log(sG,'WARN')}}async function r(sH,sI,sJ,sK){let sL=!1;let sM=await c.getFullRow({userid:[sI], ticketId:[sH,'AND']},'tickets');sM=sM.data;let sN='';let sO=sM.messages;sO=sO.split('%%');sO.pop();let sP=0;for(let sT=0;sT<=sO.length-1;sT++){if(sT<=sO.length-3&&!sK)continue;sP++;let sU=sO[sT].split('%')[0];let sV=sO[sT].split('%')[1];sU=='user'?sU='Ù¾ÛŒØ§Ù… Ø´Ù…Ø§':sU='Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ';sV=sV.replaceAll('|Ø¯Ø±ØµØ¯|','%');sN+=`${sP}- ${sU}:\n${sV}\n\n`}if(sK){let sW=[[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:sJ}]];return{button:sW,message:sN}}let sQ;if(sM.status=='closed'){sQ='âŒ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡';sL=!0}else sM.status=='user_response'?sQ='â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ':sQ='â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø® Ø´Ù…Ø§';let sR=`ğŸ”¹ ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${sH}:
ğŸ”° Ù…ÙˆØ¶ÙˆØ¹ ØªÛŒÚ©Øª: ${sM.subject}

â­•ï¸ ÙˆØ¶Ø¹ÛŒØª ØªÛŒÚ©Øª: ${sQ}

${sN}`;let sS=[[{text:'ğŸ“š Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ…Ø§Ù…ÛŒ Ù¾ÛŒØ§Ù… Ù‡Ø§',callback_data:'seeAllMessages_'+sH+'_'+sJ}]];!sL&&sS.push([{text:'âŒ Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª',callback_data:'closeTicket_'+sH+'_'+sJ},{text:'ğŸ’¬ Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø®',callback_data:'respondTicket_'+sH+'_'+sJ}]);sS.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:sJ}]);return{button:sS,message:sR}}async function s(sX){let sY=!1;let sZ=await c.getFullRow({ticketId:[sX]},'tickets');sZ=sZ.data;let tA='';let tB=sZ.messages;tB=tB.split('%%');tB.pop();let tC=0;for(let tG=0;tG<=tB.length-1;tG++){tC++;let tH=tB[tG].split('%')[0];let tI=tB[tG].split('%')[1];tH=='user'?tH='Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±':tH='Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ';tI=tI.replaceAll('|Ø¯Ø±ØµØ¯|','%');tA+=`${tC}- ${tH}:\n${tI}\n\n`}let tD;if(sZ.status=='closed'){tD='âŒ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡';sY=!0}else sZ.status=='user_response'?tD='â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø® Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ':tD='â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø® Ú©Ø§Ø±Ø¨Ø±';let tE=`ğŸ”¹ ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${sX}:
ğŸ”° Ù…ÙˆØ¶ÙˆØ¹ ØªÛŒÚ©Øª: ${sZ.subject}

â­•ï¸ ÙˆØ¶Ø¹ÛŒØª ØªÛŒÚ©Øª: ${tD}

${tA}â—ï¸Ø¯Ùˆ Ù¾ÛŒØ§Ù… Ø¢Ø®Ø± Ø¯Ø± Ø§ÛŒÙ† ØªÛŒÚ©Øª ÙÙ‚Ø· Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯
Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ…Ø§Ù…ÛŒ Ù¾ÛŒØ§Ù… Ù‡Ø§ØŒ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø§ÛŒÙ† ØªÛŒÚ©Øª Ùˆ ÛŒØ§ Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:`;let tF=Array();!sY&&tF.push([{text:'âŒ Ø¨Ø³ØªÙ† ØªÛŒÚ©Øª',callback_data:`closeUserTicket_${sX}`},{text:'ğŸ’¬ Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø®',callback_data:`respondUsersTicket_${sX}`}]);tF.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'supportTickets_1'}]);return{button:tF,message:tE}}o.on('text',async tJ=>{let tK=tJ.chat.id;let tL=tJ.message.text;let tM=Array();let tN;let tO=!1;let tP=!0;let tQ=!0;try{tL=x(tL);switch(p[tK].textReciever) {case 'banUserReason':let tV=tL+'/%/'+tK;let tW=await c.updateFullRow({userid:[p[tK].banUser.userid]},{status:p[tK].banUser.status,reason:tV},'users');tW.ok&&(tN=`âœ…ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ² Ø´Ø¯
ÙˆØ¶Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯:
âŒ Ù…Ø³Ø¯ÙˆØ¯`,tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${[p[tK].banUser.userid]}`}]));break;case 'confirmConfigDelete':let tX=p[tK].subIdName;if(tL!=p[tK].randomPhrase){tN='Ù…ØªÙ† ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§ Ù…ØªÙ† Ø§ØµÙ„ÛŒ Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯ âŒ';tO=!0;break}let tY=await c.getFullRow({subId:[tX]},'subscriptions');var tR=await e.getConfigInfo(tX,tY.data.location);var tS=tR.data;for(let vQ in tR.data.email){var tT={id:tS.id[vQ],inbound:tS.inbound[vQ]};var tU=await e.removeClient(tT,tY.data.location);!tU.ok&&(tO=!0)}await c.updateFullRow({subId:[tX]},{users_id:''},'subscriptions');tN='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯';break;case 'addClientToConfig':if(isNaN(tL)){tN=`âŒ ÙˆØ±ÙˆØ¯ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ù…ÛŒØ¨Ø§Ø´Ø¯. Ù„Ø·ÙØ§ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙØ±Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:`;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'configInfo_'+p[tK].configName}]);break}let tZ=await c.getFullRow({userid:[tL]},'users');if(!tZ.data){tN=`â€¼ï¸ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ù‡Ù†ÙˆØ² Ø¯Ø± Ø±Ø¨Ø§Øª Ø¹Ø¶Ùˆ Ù†Ø´Ø¯Ù‡
Ø¨Ø§ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ù…ÛŒØªÙˆÙ†Ù† Ø±Ø¨Ø§Øª Ø±Ùˆ Ø§Ø³ØªØ§Ø±Øª Ú©Ù†Ù†:

https://t.me/${l.botId}?start=${tK}`;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'configInfo_'+p[tK].configName}]);break}let uA=tZ.data.fullname.split('/');tN=`ğŸ‘¤ Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:

Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ: ${tL}
Ù†Ø§Ù…:
${uA[0]} ${uA[1]}

â­•ï¸ Ø§Ú¯Ø± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø¨Ø§ Ù…Ø´Ø®ØµØ§Øª Ø¨Ø§Ù„Ø§ Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø±Ø¯ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ù„ÛŒÚ© Ú©Ø±Ø¯Ù‡ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
â€¼ï¸ Ø¨Ø§ Ø¯Ø§Ø¯Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ØŒ Ø¢Ù†Ù‡Ø§ Ù…ÛŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§ Ù…ØªØµÙ„ Ø´ÙˆÙ†Ø¯. Ø­Ø°Ù/Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ùˆ ÛŒØ§ Ø­Ø°Ù Ú©Ø§Ù†ÙÛŒÚ¯ ÙÙ‚Ø· Ø¨Ù‡ Ø¯Ø³Øª Ø´Ù…Ø§ (ØµØ§Ø­Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯) Ø§Ù…Ú©Ø§Ù† Ù¾Ø°ÛŒØ± Ø§Ø³Øª`;tM=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±',callback_data:'addedClientConfig_'+tL+'_'+p[tK].configName}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'configInfo_'+p[tK].configName}]];break;case 'removeClientFromConfig':if(isNaN(tL)){tN=`âŒ ÙˆØ±ÙˆØ¯ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ù…ÛŒØ¨Ø§Ø´Ø¯. Ù„Ø·ÙØ§ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙØ±Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:`;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'configInfo_'+p[tK].configName}]);break}let uB=await c.getFullRow({userid:[tL]},'users');let uC=p[tK].configName;if(!uB.data){tN='âŒ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯';tO=!0;break}let uD=await c.getFullRow({subId:[uC]},'subscriptions');if(!uD.data.users_id.includes(tL)){tN='â—ï¸ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯.';tO=!0;break}let uE=uB.data.fullname.split('/');tN=`ğŸ‘¤ Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:

Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ: ${tL}
Ù†Ø§Ù…:
${uE[0]} ${uE[1]}

â­•ï¸ Ø§Ú¯Ø± Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø¨Ø§ Ù…Ø´Ø®ØµØ§Øª Ø¨Ø§Ù„Ø§ Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø±Ø¯ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ù„ÛŒÚ© Ú©Ø±Ø¯Ù‡ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
â€¼ï¸ Ø¨Ø§ Ø­Ø°Ù Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±ØŒ Ø¢Ù†Ù‡Ø§ Ù…ÛŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ø´Ù…Ø§ Ù…ØªØµÙ„ Ø´ÙˆÙ†Ø¯ Ø§Ù…Ø§ Ø²Ù…Ø§Ù† Ùˆ Ø­Ø¬Ù… Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡ Ø±Ø§ Ù†Ù…ÛŒØªÙˆØ§Ù†Ù†Ø¯ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†Ù†Ø¯. Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù‚Ø·Ø¹ Ú©Ù†ÛŒØ¯ØŒ Ù„Ø·ÙØ§ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù„ÛŒÙ†Ú© Ù…Ø¬Ø¯Ø¯ Ù†Ù…Ø§ÛŒÛŒØ¯`;tM=[[{text:'âŒ ØªØ§ÛŒÛŒØ¯ Ùˆ Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±',callback_data:'removedClientConfig_'+tL+'_'+uC}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`configInfo_${uC}`}]];break;case 'renameConfigName':let uF=p[tK].configName;c.updateFullRow({subId:[uF]},{name:tL},'subscriptions');tN='âœ… Ù†Ø§Ù… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`setMyConfig_${uF}`}]);break;case 'moreDataTraffic':if(isNaN(tL)||tL<1){tN='â—ï¸ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ù„Ø·ÙØ§ ÛŒÚ© Ø¹Ø¯Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ';tO=!0;break}let uG=await c.getFullRow({subId:[p[tK].configName]},'subscriptions');tL=~~tL;let uH=await e.getConfigInfo(p[tK].configName,uG.data.location);uH=~~uH.data.totalGB/1024**3+tL;let uI=await y(uG.data.location);uI=uI.traffic;let uJ=uI.find(t=>uH>=t.min&&uH<=t.max);uJ=uJ.price*tL;let _P=await c.getFullRow({userid:[tK]},'users');tN=`â“ Ù…Ù‚Ø¯Ø§Ø± ØªØ±Ø§ÙÛŒÚ© Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ù…Ø§:
  ${tL}GB
  
  ğŸ’³ Ù‡Ø²ÛŒÙ†Ù‡ Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± ØªØ±Ø§ÙÛŒÚ© Ø¨Ø±Ø§Ø¨Ø± Ø§Ø³Øª Ø¨Ø§: ${uJ} ØªÙˆÙ…Ø§Ù† Ùˆ Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ú©Ù… Ù…ÛŒØ´ÙˆØ¯
  ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§: ${_P.data.balance} ØªÙˆÙ…Ø§Ù†
  
  ğŸ’  Ø§Ú¯Ø± Ø§ÛŒÙ† ØªØ±Ø§Ú©Ù†Ø´ Ù…ÙˆØ±Ø¯ ØªØ§ÛŒÛŒØ¯ Ø´Ù…Ø§ Ù…ÛŒØ¨Ø§Ø´Ø¯ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:`;tM=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª',callback_data:'confirmAddData_Traffic_'+p[tK].configName+'_'+tL+'_'+uJ}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'prolongConfig_'+p[tK].configName}]];break;case 'moreDataIP':if(isNaN(tL)||tL<1){tN='â—ï¸ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ù„Ø·ÙØ§ ÛŒÚ© Ø¹Ø¯Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ';tO=!0;break}let _Q=await c.getFullRow({subId:[p[tK].configName]},'subscriptions');tL=~~tL;let _R=await y(_Q.data.location);let _s=_R.addon[0].user*tL;let _T=await c.getFullRow({userid:[tK]},'users');tN=`â“ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ù…Ø§:
    ${tL}
    
    ğŸ’³ Ù‡Ø²ÛŒÙ†Ù‡ Ø§ÛŒÙ† ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø§Ø¶Ø§ÙÙ‡ Ø¨Ø±Ø§Ø¨Ø± Ø§Ø³Øª Ø¨Ø§: ${_s} ØªÙˆÙ…Ø§Ù† Ùˆ Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ú©Ù… Ù…ÛŒØ´ÙˆØ¯
    ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§: ${_T.data.balance} ØªÙˆÙ…Ø§Ù†
    
    ğŸ’  Ø§Ú¯Ø± Ø§ÛŒÙ† ØªØ±Ø§Ú©Ù†Ø´ Ù…ÙˆØ±Ø¯ ØªØ§ÛŒÛŒØ¯ Ø´Ù…Ø§ Ù…ÛŒØ¨Ø§Ø´Ø¯ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:`;tM=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª',callback_data:'confirmAddData_IP_'+p[tK].configName+'_'+tL+'_'+_s}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'prolongConfig_'+p[tK].configName}]];break;case 'enterGiftCode':p[tK].gitCodeCooldown=Date.now();let _u=await c.getFullRow({code:[tL]},'gifts');if(!_u.data){tN='âŒ Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'gifts'}]);break}if(_u.data.users_id.includes(tK)){tN='âŒ Ø´Ù…Ø§ Ø§ÛŒÙ† Ù‡Ø¯ÛŒÙ‡ Ø±Ø§ Ù‚Ø¨Ù„Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'gifts'}]);break}_u.data.users_id+=`${tK}/`;let _v=await c.useGift(tK,tL);switch(_v.code) {case 404:tN='âŒ Ø§ÛŒÙ† Ø¬Ø§ÛŒØ²Ù‡ Ø¯ÛŒÚ¯Ø± Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª';break;case 401:tN=`âŒ Ù…Ù‡Ù„Øª/Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø§ÛŒÙ† Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª`;break;case 200:tN=`âœ… ${getGiftDetails.data.prize} ØªÙˆÙ…Ø§Ù† Ù‡Ø¯ÛŒÙ‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`;break}tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]);break;case 'enterManualConfig':let _w,_x;let _y=!0;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'myConfigs_1'}]);if(tL.includes('vmess://')){let vR=aI(tL.replace('vmess://',''));let vS=A(l.credentials);for(let vT of vS){if(_w)continue;try{let vU=await T(vR,vT);vU?(_w=vU,_x=vT,_y=!0):(_y=!1)}catch(vV){continue}}}else if(tL.includes('vless://')){let vW=aJ(tL.replace('vless://',''));let vX=A(l.credentials);for(let vY of vX){if(_w)continue;try{let vZ=await T(vW,vY);vZ?(_w=vZ,_x=vY,_y=!0):(_y=!1)}catch(wA){continue}}}else{let wB=A(l.credentials);for(let wC of wB){let wD=l.credentials[wC].sub_address;tL.includes(wD)&&(_y=!0,_x=wC,_w=tL.replace(wD,''))}}let _z=await e.getConfigInfo(_w,_x);(!_z.data||!1)&&(_y=!1);if(!_y){tN='â—ï¸ Ú©Ø§Ù†ÙÛŒÚ¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª';break}let uK=await c.getFullRow({subId:[_w]},'subscriptions');if(uK.data){tN='âŒ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø§Ø² Ù‚Ø¨Ù„ Ø¯Ø± Ø±Ø¨Ø§Øª Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª';break}let uL=await e.getRandomWords(2,4);uL=uL.data;await c.insertFullRow({owner_id:tK,users_id:`${tK}/`,subId:_w,name:uL[0]+'-'+uL[1],status:'active',location:_x,reserve:'',sentNotice:0},'subscriptions');tN='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯';break;case 'enterTicketSubject':p[tK].subject=tL;tN='ğŸ“ Ùˆ Ø­Ø§Ù„Ø§ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯\n\nğŸ“ Ù…Ø´Ú©Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ø± ÛŒÚ© Ù¾ÛŒØ§Ù… Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯:';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'}]);p[tK].textReciever='enterTicketBody';tQ=!1;break;case 'enterTicketBody':let uM=aL(6,!0,!1);await c.insertFullRow({ticketId:uM,userid:tK,subject:p[tK].subject,messages:'',status:'user_response'},'tickets');await v(tL,uM,'user');tN='âœ… ØªÛŒÚ©Øª Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'support'}]);break;case 'userResponseTicket':await v(tL,p[tK].ticketId,'user');tN='âœ”ï¸ Ù¾Ø§Ø³Ø® Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:p[tK].previous}]);break;case 'changeTheBalance':tL=parseInt(tL);let uN=p[tK].usersid;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`seeUserStats_${uN}`}]);let uO=p[tK].balanceQuery;if(isNaN(tL)||tL<=0){tN='â—ï¸ Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ ÛŒÚ© Ø¹Ø¯Ø¯ Ùˆ Ø§Ø² 0 Ø¨Ø²Ø±Ú¯ØªØ± Ø¨Ø§Ø´Ø¯';break}let uP,uQ;uO=='increase'?(uP=tL,uQ=`âœ… Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ ${tL} ØªÙˆÙ…Ø§Ù† Ø§Ø² Ø·Ø±Ù Ù…Ø¯ÛŒØ± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`):(uP=`-${tL}`,uQ=`â—ï¸ Ø§Ø² Ø·Ø±Ù Ù…Ø¯ÛŒØ± ${tL} ØªÙˆÙ…Ø§Ù† Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ Ú©Ù… Ø´Ø¯`);await c.changeUserBalance(uN,uP);aE(uN,0,uQ,[],!1);tN='âœ… Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯';break;case 'userConfigsUser':let uR=p[tK].userConfigsQuery;let uS=p[tK].usersid;let uT=p[tK].subId;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'manageUsersConfig_'+uS+'_'+uT}]);let uU=await c.getFullRow({userid:[tL]},'users');uU=uU.data;if(!uU){tN='âŒ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¯Ø± Ø±Ø¨Ø§Øª Ø¹Ø¶Ùˆ Ù†Ø´Ø¯Ù‡';break}let uV=await c.getFullRow({subId:[uT]},'subscriptions');uV=uV.data;let uW=uR=='delete'?uV.users_id.replace(`${tL}/`,''):uV.users_id+tL+'/';await c.updateFullRow({subId:[uT]},{users_id:uW},'subscriptions');if(uR=='delete'){if(!uV.users_id.includes(tL)){tN='âŒ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯';break}tN='âœ… Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯'}else uR=='add'&&(tN='âœ… Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');break;case 'changeUserConfigs':tL=parseInt(tL);let uX=p[tK].subId;let uY=p[tK].usersid;tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+uY+'_'+uX}]);let uZ=await c.getFullRow({subId:[uX]},'subscriptions');uZ=uZ.data;let vA=await e.getConfigInfo(uX,uZ.location);vA=vA.data;if(isNaN(tL)){tN='âŒ Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}if(tL<0){tN='âŒ Ù„Ø·ÙØ§ ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯ØªØ± ÛŒØ§ Ù…Ø³Ø§ÙˆÛŒ Ø§Ø² 0 ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';break}let vB=!1;let vC=!1;let vD=!1;switch(p[tK].changeQuery) {case 'data':vA.totalGB=tL*1024**3;vB=!0;break;case 'usage':vA.usage=tL*1024**3;vC=!0;break;case 'IP':vA.limitIp=~~tL;vB=!0;break;case 'expiry':vA.expiryTime=Date.now()+tL*24*60*60*1000;vB=!0;break;case 'owner':let wE=await c.getFullRow({userid:[uY]},'users');if(!wE.data){tN='âŒ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¯Ø± Ø±Ø¨Ø§Øª Ø¹Ø¶Ùˆ Ù†Ø´Ø¯Ù‡';vD=!0;break}else if(!uZ.users_id.includes(tL)){tN='âŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯';vD=!0;break}await c.updateFullRow({subId:[uX]},{owner_id:tL},'subscriptions');break}if(vD)break;if(vB)for(let wF in vA.id){let wG={...vA};wG.id=vA.id[wF];wG.email=vA.email[wF];wG.inbound=vA.inbound[wF];await e.updateClient(wG,uZ.location)}else vC&&await e.changeClientUsage(vA,uZ.location);tN='âœ… ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯';break;case 'confirmDeleteUserConfig':let vE=p[tK].usersid;let vF=p[tK].subId;console.log(vF);if(tL!==p[tK].randomString){tN='âŒ Ù…ØªÙ† ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§ Ù…ØªÙ† Ø§ØµÙ„ÛŒ Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getUserConfigDetails_'+uN+'_'+subId}]);break}let vG=await c.getFullRow({subId:[vF]},'subscriptions');vG=vG.data;let vH=await e.getConfigInfo(vF,vG.location);vH=vH.data;for(let wH in vH.id){let wI=await e.removeClient({id:vH.id[wH], inbound:vH.inbound[wH]},vG.location);if(!wI.ok)break}await c.updateFullRow({subId:[vF]},{users_id:''},'subscriptions');tN='âœ… Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:`userConfigs_${vE}`}]);break;case 'respondUsersTicket':let vI=await c.getFullRow({ticketId:[p[tK].ticketId]},'tickets');await v(tL,vI.data.ticketId,vI.data.userid);tN='âœ… Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯';tM=[[{text:'ğŸ“¨ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÛŒÚ©Øª Ù‡Ø§',callback_data:'supportTickets_1'}],[{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ',callback_data:'main_menu'}]];break;case 'seeUserStats':let vJ=await c.getFullRow({userid:[tL]},'users');if(!vJ.data){tN='âŒ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ù‡Ù†ÙˆØ² Ø¹Ø¶Ùˆ Ø±Ø¨Ø§Øª Ù†Ø´Ø¯Ù‡';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'getAllUsers_1'}]);break}q(tK,`seeUserStats_${tL}`,!1);return;case 'getUserTicketById':let vK=await c.getFullRow({ticketId:[tL]},'tickets');if(!vK.data){tN='âŒ  Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'supportTickets_1'}]);break}q(tK,`seeUserTicket_${tL}`,!1);return;case 'getTicketById':let vL=await c.getFullRow({ticketId:[tL], userid:[tK,'AND']},'tickets');let vM=p[tK].previousPage;if(!vL.data){tN='âŒ  Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:vM}]);break}q(tK,`openTicket_${tL}_${vM}`,!1);case 'sendNotice':tN=`â“ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø²ÛŒØ± Ø¨Ù‡ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ

Ù…Ø­ØªÙˆÛŒØ§Øª Ù¾ÛŒØ§Ù…:
${tL}`;p[tK].fullMessage=tL;tM.push([{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ  Ø§Ø±Ø³Ø§Ù„',callback_data:'confirmSendNotice'}]);break;case 'getNewConfigTraffic':tL=parseInt(tL);if(isNaN(tL)||tL<0){tN='âŒ Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}tQ=!1;p[tK].textReciever='getNewConfigDuration';p[tK].newConfigTraffic=tL*1024**3;tN='â” Ù„Ø·ÙØ§ Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ù…Ø¯ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨Ù‡ Ù…Ø§Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ´ÙˆØ¯): \n\nâ• Ø¨Ø±Ø§ÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';tM=[[{text:'ğŸ”š Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'userConfigs_'+p[tK].targetUsersId}]];break;case 'getNewConfigDuration':tL=parseInt(tL);if(isNaN(tL)||tL<0){tN='âŒ Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}tQ=!1;p[tK].textReciever='getNewConfigIP';p[tK].newConfigDuration=tL;tN='â” Ù„Ø·ÙØ§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ù…Ø¯ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯: \n\nâ• Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ù…Ø­Ø¯ÙˆØ¯ÛŒØª 0 Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';tM=[[{text:'ğŸ”š Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'userConfigs_'+p[tK].targetUsersId}]];break;case 'getNewConfigIP':tL=parseInt(tL);if(isNaN(tL)||tL<0){tN='âŒ Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}tQ=!1;p[tK].textReciever='getNewConfigDuration';p[tK].newConfigIP=~~tL;let vN=p[tK].newConfigTraffic;vN=vN==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯':`${vN} GB`;let vO=p[tK].newConfigDuration;vO=vO==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯':`${vO} Ù…Ø§Ù‡`;let vP=p[tK].newConfigIP;vP=vP==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯':`${vP} Ú©Ø§Ø±Ø¨Ø±`;tN=`â‰ï¸ Ø¢ÛŒØ§ Ø³Ø§Ø®Øª ÛŒÚ© Ú©Ø§Ù†ÙÛŒÚ¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ù…Ø´Ø®ØµØ§Øª Ø²ÛŒØ± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ${p[tK].targetUsersId} Ù…ÙˆØ±Ø¯ ØªØ§ÛŒÛŒØ¯ Ø´Ù…Ø§ Ù…ÛŒØ¨Ø§Ø´Ø¯ØŸ

ğŸ”‹ Ø­Ø¬Ù… Ú©Ø§Ù†ÙÛŒÚ¯: ${vN}
ğŸ“… Ù…Ø¯Øª Ú©Ø§Ù†ÙÛŒÚ¯: ${vO}
ğŸ‘¥ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±: ${vP}`;tM=[[{text:'âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:'confirmAddNewConfig'}],[{text:'ğŸ”š Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'userConfigs_'+p[tK].targetUsersId}]];break;case 'getCheckerTimer':tL=parseInt(tL);tM.push([{text:'ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª',callback_data:'management'}]);if(isNaN(tL)||tL<0){tN='âŒ Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ ØµØ­ÛŒØ­ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯';break}tL==0?(aO=0,aQ()):(aO=tL*1000,aP());tN='âœ… ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯';break;default:tP=!1;break}}catch(wJ){d.log(wJ,'WARN');tO=!0}tP&&aE(tK,0,tN,tM,!1);tO&&q(tK,'main_menu',!1,'','','');tQ&&(p[tK].textReciever='')});async function T(wK,wL){let wM;try{let wN=await e.getConfigSubIdBy_uuid(wK,wL);wM=wN.data}catch(wO){d.log(wO,'WARN')}finally{return wM}}async function u(wP,wQ){try{let wR=await c.getAllRows({},'users');wR=wR.data;if(wP=='admins'){let wS=Array();for(let wT of wR)wT.user_lvl>0&&wS.push(wT);wR=[...wS]}for(let wU of wR)aE(wU.userid,0,wQ,[],!1)}catch(wV){d.log(wV)}}async function v(wW,wX,wY){try{let wZ=await c.getFullRow({ticketid:[wX]},'tickets');wZ=wZ.data;wW=wW.replaceAll('%','|Ø¯Ø±ØµØ¯|');wZ.messages+=`${wY}%${wW}%%`;wZ.last_response=Date.now();await c.updateFullRow({ticketid:[wX]},{messages:wZ.messages, last_response:wZ.last_response},'tickets');if(wY=='user')w(wW,wX);else{aE(wZ.userid,0,`âœ”ï¸ Ú©Ø§Ø±Ø¨Ø± Ú¯Ø±Ø§Ù…ÛŒØŒ Ø¨Ù‡ ØªÛŒÚ©Øª Ø´Ù…Ø§Ø±Ù‡ ${wX} Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ø´Ø¯`,[[{text:'ğŸ“§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÛŒÚ©Øª',callback_data:'openTicket_'+wX+'_'+'openTickets/1'}]],!1)}}catch(xA){d.log(xA,'WARN')}}async function w(xB,xC){try{let xD=await c.getAllRows({},'users');xD=xD.data;xB=xB.replaceAll('|Ø¯Ø±ØµØ¯|','%');let xE=await c.getFullRow({ticketId:[xC]},'tickets');xE=xE.data;let xF=await c.getFullRow({userid:[xE.userid]},'users');xF=xF.data;let xG=xF.userid;let xH=xF.fullname.split('/').join(' ');for(let xI of xD)if(xI.user_lvl>0){aE(xI.userid,0,`ğŸ’¬ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ø·Ø±Ù ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ø«Ø¨Øª Ø´Ø¯:

âšœï¸ Ø´Ù…Ø§Ø±Ù‡ ØªÛŒÚ©Øª: ${xC}
ğŸ”° Ù…ÙˆØ¶ÙˆØ¹ ØªÛŒÚ©Øª: ${xE.subject}
Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø±: ${xG} - ${xH}

Ù¾ÛŒØ§Ù…:
${xB}`,[[{text:'ğŸ’¬ Ù¾Ø§Ø³Ø®',callback_data:`respondUsersTicket_${xC}`}]],!1)}}catch(xJ){d.log(xJ)}}function x(xK){var xL=['Ù ','Ù¡','Ù¢','Ù£','Ù¤','Ù¥','Ù¦','Ù§','Ù¨','Ù©'],xM=['0','1','2','3','4','5','6','7','8','9'];return xK.replace(/\d/g,xN=>{var xO=xL.indexOf(xN);return xO!==-1?xM[xO]:xN})}async function y(xP){let xQ=await c.getAllRows({location:[xP]},'pricing');let xR={pack:[],addon:[],traffic:[]};for(let xS of xQ.data)switch(xS.type) {case 'pack':xR.pack.push({id:xS.item_id,ipLimit:xS.ip_limit,duration:xS.duration,traffic:xS.traffic,price:xS.price});break;case 'addon':xR.addon={user:xS.ip_limit,month:xS.duration};break;case 'traffic':xR.traffic.push({price:xS.price});let xT=xS.traffic.split(',');xT.pop();for(let xU of xT){let xV=xU.split(':');xR.traffic[xR.traffic.length-1][xV[0]]=xV[1]}break}return xR}async function z(xW,xX,xY){xY=xY?`_${xY}`:'';let xZ=Array();var yA=await y(xW);let yB=`â—ï¸ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø§Ù‡ Ø²Ù…Ø§Ù† Ø§Ø¶Ø§ÙÙ‡ØŒ Ù…Ø¨Ù„Øº ${yA.addon.month} ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ù‡Ø²ÛŒÙ†Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ´ÙˆØ¯
â—ï¸ Ø¯Ø±ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±/Ø­Ø¬Ù… Ø§Ø¶Ø§ÙÙ‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø®Ø±ÛŒØ¯ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ù…Ø±Ø¬Ø¹Ù‡ Ø¨Ù‡ (ğŸ“± Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ù…Ù†>Ú©Ø§Ù†ÙÛŒÚ¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±>â™»ï¸ ØªÙ…Ø¯ÛŒØ¯)ØŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±ØªÙ‚Ø§ Ø¯Ù‡ÛŒØ¯`;for(let yC of yA.pack){let yD=yC.traffic==0?'Ø­Ø¬Ù… Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯':yC.traffic+' Ú¯ÛŒÚ¯';let yE=yC.ipLimit==0?'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±':yC.ipLimit+' Ú©Ø§Ø±Ø¨Ø±Ù‡';let yF=`ğŸ’  ${yD} - ${yE} - ${yC.price} ØªÙˆÙ…Ø§Ù†`;xZ.push([{text:yF,callback_data:xX+'_'+yC.id+xY}])}return{buttons:xZ,info:yB}}async function aA(yG,yH,yI){let yJ=await y(yG);let yK;for(let yO of yJ.pack)yO.id==yI&&(yK=yO.price);let yL=l.credentials[yG].unlimited_duratoin_price;let yM=yJ.addon.month;let yN=yH==0?(yL-1)*yM+yK:(yH-1)*yM+yK;return yN}async function aB(yP){let yQ=Array();try{let yR=await aC();for(let yS of yR){let yT=await o.telegram.getChatMember(`@${yS}`,yP);yT.user.status=='left'&&yQ.push(yS)}}catch(yU){d.log(yU,'WARN')}finally{return yQ}}async function aC(){let yV=new Set();try{let yW=await c.getAllRows({},'channels');for(let yX of yW.data)yV.add(yX.id)}catch(yY){d.log(yY,'WARN')}finally{return yV}}async function aD(){let yZ=new Set();try{let zA=await c.getAllRows({status:['banned','']},'users');for(let zB of zA.data)yZ.add(zB.userid)}catch(zC){d.log(zC,'WARN')}finally{return yZ}}async function aE(zD,zE,zF,zG,zH){try{zF=zF.replace(/[\#()\+\.\<=-_\{\|\}-]/g,'\\$&');zH===!0?await o.telegram.editMessageText(zD,zE,void 0,zF,{reply_markup:{inline_keyboard:zG},parse_mode:'MarkdownV2'}):await o.telegram.sendMessage(zD,zF,{reply_markup:{inline_keyboard:zG},parse_mode:'MarkdownV2'})}catch(zI){d.log(zI,'ERROR')}}function aF(zJ){return `${zJ}`.replace(/\B(?=(\d{3})+(?!\d))/g,',')}function aG(zK){var zL=['ps','id','add','port'];for(const zN of zL)if(!zK.hasOwnProperty(zN))throw Error(`Missing required property: ${zN}`);const zM=Buffer.from(JSON.stringify({v:'2',ps:zK.ps,add:zK.add,port:zK.port,id:zK.id,scy:'auto',net:'tcp',type:'none',tls:'none'})).toString('base64');return`vmess://${zM}`}function aH(zO){let{ps:zP,add:zQ,port:zR,id:zS}=zO;zP=encodeURIComponent(zP);return`vless://${zS}@${zQ}:${zR}?type=tcp&security=none#${zP}`}function aI(zT){var zU=JSON.parse(atob(zT));if(!zU.id)return;return zU.id}function aJ(zV){if(!zV.includes('@'))return;let zW=zV.slice(0,zV.indexOf('@'));if(zW.length!==36)return;return zW}function aK(){return k()}function aL(zX,zY,zZ){let _temp4='abcdefghijklmnopqrstuvwxyz';zZ===!1&&(_temp4='');zY&&(_temp4+='0123456789');let _temp5=new String();for(i=0;i<zX;i++){_temp5+=_temp4.charAt(~~Math.random()*_temp4.length)}return _temp5}async function aM(_temp,_temp2,_temp3){let _temp6=!0;try{let _temp7=await c.getFullRow({item_id:[_temp]},'pricing');_temp7=_temp7.data;let _temp8=aL(9,!0);let _temp9=aL(16,!0);let _temp10=_temp7.location;let _temp11=A(l.credentials[_temp10].inbounds);let _temp12=Date.now();let _temp13=_temp2==0?0:_temp12+parseInt(_temp2)*30*24*60*60*1000;for(let _temp16 in _temp11){let _temp17=_temp11[_temp16];let _temp18=aK();let _temp19=await e.addClient({id:_temp18, security:'auto', email:_temp8+'-'+_temp16, limitIp:parseInt(_temp7.ip_limit), totalGB:parseInt(_temp7.traffic)*1024**3, expiryTime:_temp13, enable:!0, tgId:'', subId:_temp9, inbound:_temp17},_temp10);if(!_temp19.ok){_temp6=!1;break}}if(!_temp6)return{ok:_temp6,msg:'error in adding client'};let _temp14=await e.getRandomWords(2,4);_temp14=_temp14.data;let _temp15=await c.insertFullRow({owner_id:_temp3,users_id:`${_temp3}/`,subId:_temp9,name:_temp14[0]+'-'+_temp14[1],status:'active',location:_temp10,reserve:'',sentNotice:0},'subscriptions');!_temp15.ok&&(_temp6=!1)}catch(_temp20){_temp6=!1;d.log(_temp20,'ERROR')}finally{return{ok:_temp6}}}let aN;let aO=30000;function aP(){aQ();aN=setInterval(aR,aO)}aP();function aQ(){clearInterval(aN)}async function aR(){try{let _temp21,_temp22,_temp23,_temp24;let _temp25=5*24*60*60*1000;let _temp26=Date.now();let _temp27=A(l.credentials);for(let _temp28 of _temp27){let _temp29=await e.getFinishedClients(_temp28);for(let reason of A(_temp29.data))for(let _temp30 of A(_temp29.data[reason])){let _temp31='';let _temp32=Array();let _temp33=_temp29.data[reason][_temp30];let _temp34=reason=='outdated'?'Ø²Ù…Ø§Ù†':'Ø­Ø¬Ù…';_temp33+_temp25<=_temp26?_temp23=!0:_temp21=!0;let _temp35=await c.getFullRow({subId:[_temp30]},'subscriptions');_temp35=_temp35.data;if(!_temp35){let _temp36=await e.getConfigInfo(_temp30,_temp28);_temp36=_temp36.data;for(let _temp37 in _temp36.id){let _temp38={};_temp38.id=_temp36.id[_temp37];_temp38.inbound=_temp36.inbound[_temp37];await e.removeClient(_temp38,_temp28)}await e.startClientSync(_temp30,_temp28);d.log(`removed ${_temp30}: ${reason}`,'INFO');continue}if(_temp35.sentNotice==1){_temp21=!1;if(_temp35.reserve){let _temp39=_temp35.reserve.split('/');_temp39.pop();let _temp40=_temp39[_temp39.length-1];let _temp41=await c.getFullRow({reserve_id:[_temp40],subId:[_temp30,'AND'],status:['pending','AND']},'reservations');_temp41.data&&(_temp24=_temp40,_temp34=!1,_temp22=!0)}}if(_temp21){_temp31=`â—ï¸ Ú©Ø§Ù†ÙÛŒÚ¯ ${_temp35.name} Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù† ${_temp34} Ú©Ø§Ù†ÙÛŒÚ¯ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯

Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ ØªÙ…Ø§ÛŒÙ„ Ø¨Ù‡ ØªÙ…Ø¯ÛŒØ¯ Ø¢Ù† Ø¯Ø§Ø±ÛŒØ¯ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ù…Ø±Ø¬Ø¹Ù‡ Ø¨Ù‡ Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ù†ÙÛŒÚ¯ Ø¢Ù† Ø±Ø§ ØªÙ…Ø¯ÛŒØ¯ Ú©Ù†ÛŒØ¯
Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ†ØµÙˆØ±ØªØŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø²  5 Ø±ÙˆØ² Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯Ù‘`;_temp32.push([{text:'ğŸ“± Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`configInfo_${_temp30}`}]);await c.updateFullRow({subId:[_temp30]},{sentNotice:1},'subscriptions');d.log(`${_temp30} was finished, gave a notice`,'INFO')}else if(_temp23){_temp31=`â—ï¸ Ú©Ø§Ù†ÙÛŒÚ¯ ${_temp35.name} Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ú¯Ø°Ø´ØªÙ† Ø§Ø² ØªØ§Ø±ÛŒØ® Ù…Ø¬Ø§Ø² Ø¬Ù‡Øª ØªÙ…Ø¯ÛŒØ¯ØŒ Ø­Ø°Ù Ø´Ø¯`;let _temp42=await e.getConfigInfo(_temp30,_temp28);_temp42=_temp42.data;for(let _temp43 in _temp42.id){let _temp44={};_temp44.id=_temp42.id[_temp43];_temp44.inbound=_temp42.inbound[_temp43];await e.removeClient(_temp44,_temp28)}await c.updateFullRow({subId:[_temp30]},{users_id:''},'subscriptions');await e.startClientSync(_temp30,_temp28);d.log(`removed ${_temp30}: ${reason}`,'INFO')}else if(_temp22){let _temp45=await e.getConfigInfo(_temp30,_temp28);_temp45=_temp45.data;let _temp46=await c.getFullRow({reserve_id:[_temp24], subId:[_temp30,'AND']},'reservations');_temp46=_temp46.data;let _temp47=_temp46.duration==0?0:Date.now()+_temp46.duration*30*24*60*60*1000;let _temp48=_temp46.traffic==0?0:_temp46.traffic*1024**3;let _temp49={email:'',enable:!0,expiryTime:_temp47,id:'',limitIp:_temp46.ip,subId:_temp30,tgId:'',totalGB:_temp48,inbound:0};for(let _temp50 in _temp45.id){_temp49.id=_temp45.id[_temp50];_temp49.inbound=_temp45.inbound[_temp50];_temp49.email=_temp45.email[_temp50];await e.updateClient(_temp49,_temp28)}await c.updateFullRow({reserve_id:[_temp24], subId:[_temp30,'AND']},{status:'activated'},'reservations');await c.updateFullRow({subId:[_temp30]},{sentNotice:0},'subscriptions');await e.startClientSync(_temp30,_temp28);_temp31=`âœ… Ú©Ø§Ù†ÙÛŒÚ¯ ${_temp35.name} Ø¨Ù‡ Ø§ØªÙ…Ø§Ù… Ø±Ø³ÛŒØ¯ Ùˆ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø²Ø±Ùˆ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø¬Ø§ÛŒ Ø¢Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯`;_temp32.push([{text:'ğŸ“± Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯',callback_data:`configInfo_${_temp30}`}]);d.log(`reserve for ${_temp30} was activated`,'INFO')}_temp31!==''&&aE(_temp35.owner_id,0,_temp31,_temp32,!1)}}}catch(_temp51){d.log(_temp51,'ERROR')}}o.launch(_temp52=>{_temp52?d.log('an error has occured while launcging bot: ',_temp52):d.log('the bot is listening','INFO')});
